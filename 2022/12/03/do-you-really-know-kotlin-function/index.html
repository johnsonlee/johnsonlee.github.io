<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Johnson's personal blog"><meta name="baidu-site-verification" content="sSd2p2uQfO"><meta name="keywords" content="李景森,架构设计,滴滴,快手,性能优化,我在滴滴做架构,johnsonlee,johnson,lijingsen,jingsen,booster,virtualapk,android,java,kotlin,performance,optimizer,flutter,javascript,typescript,node.js"><title>Kotlin 填坑记之 FunctionReference | Johnson Lee</title><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="preload" type="text/css" href="/libs/pure/1.0.0/pure-min.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><link rel="preload" type="text/css" href="/libs/pure/1.0.0/grids-responsive-min.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><link rel="preload" href="/libs/font-awesome/4.7.0/css/font-awesome.min.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="/libs/loadCSS/2.1.0/loadCSS.js" async></script><script>function load() {
  return Promise.all(Array.prototype.map.call(arguments, (src) => {
    return new Promise((resolve, reject) => {
      var script = document.createElement("script");
      script.asrc = 1;
      script.src = src;
      var sibling = document.getElementsByTagName("script")[0];
      sibling.parentNode.insertBefore(script, sibling);
      script.onload = function() {
        resolve();
      }
    })
  }));
}
String.prototype.replaceAll = function(search, replacement) {
  var target = this;
  return target.split(search).join(replacement);
};</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Kotlin 填坑记之 FunctionReference</h1><a id="logo" href="/.">Johnson Lee</a><p class="description">Get into trouble, make mistakes, fight, love, live</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/tags/"><i class="fa fa-tag"> 标签</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Kotlin 填坑记之 FunctionReference</h1><div class="post-meta">Dec 3, 2022<span> | </span><span class="category"><a href="/categories/computer-science/">Computer Science</a><a href="/categories/computer-science/kotlin/"> / Kotlin</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.7k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 7</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><p>在 Booster 4.15.0 之前，一直使用的是 Kotlin 1.3，之所一直用比较低的 Kotlin 版本，主要的原因还是考虑到 Kotlin 版本的兼容性问题，但要支持 AGP 7.3 就不得不升级 Kotlin 版本，因为 AGP 7.3 就依赖了 Kotlin 1.5，所以，Booster 4.15.0 花了很长的时间来解决兼容性的问题。</p>
<h2 id="Kotlin-的头等公民-——-Function"><a href="#Kotlin-的头等公民-——-Function" class="headerlink" title="Kotlin 的头等公民 —— Function"></a>Kotlin 的头等公民 —— Function</h2><p>头等函数 (<code>Function</code>) 是函数式编程语言不可或缺的特性，Kotlin 也不例外，由于 <code>Function</code> 在 Kotlin 中被广泛使用，也是兼容性问题的高发区，大家有没有好奇 Kotlin 的 <code>Function</code> 在字节码层面是如何实现的呢？以下面的代码为例：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span></span><br></pre></td></tr></table></figure>

<p>如果要在 Java 中实现上面的例子，需要定义一个 <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html">Functional Interface</a>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Int2Int</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">invoke</span><span class="params">(<span class="type">int</span> value)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者使用 JDK 自带的 <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html">Function&lt;T, R&gt;</a>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Function&lt;Int, Int&gt; i2i = <span class="comment">/* ... */</span>;</span><br></pre></td></tr></table></figure>

<p>Java 8 标准 API 针对 <code>Function</code> 只提供了 <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Function.html">Function&lt;T, R&gt;</a> 和 <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/util/function/BiFunction.html">BiFunction&lt;T, U, R&gt;</a>，如果想加支持更多参数的 <code>Function</code>，要么自定义 <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/lang/FunctionalInterface.html">Functional Interface</a>，要么用 Lamda 表达式。</p>
<p>Kotlin 天生就能很好的支持 Lambda 表达式，并在标准库中定义了 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/functions/Functions.kt#L11">Function0<R></a>, <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/functions/Functions.kt#L16">Function1&lt;P1, R&gt;</a>, … <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/functions/Functions.kt#L121">Function22&lt;P1, …, P22, R&gt;</a> 一共 23 个 <code>Function</code> 接口，看到这里，是不是突然感觉 Kotlin 标准库的设计怎么这么傻X，如果有超过 22 个参数的 <code>Function</code> 怎么办？（先卖个关子🤪）</p>
<h2 id="Lambda-vs-Function-Reference"><a href="#Lambda-vs-Function-Reference" class="headerlink" title="Lambda vs Function Reference"></a>Lambda vs Function Reference</h2><p><em>Function Reference</em> 是 Kotlin 中的概念，在 Java 中与之同等的概念为 <em>Method Reference</em>，说的都是同一个东西，就是方法的引用，例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Arrays.asList(args).forEach(System.out::println);</span><br></pre></td></tr></table></figure>

<p>其中，<code>System.out::println</code> 就是对 <code>System.out</code> 实例的 <code>println</code> 方法的引用，那跟 Lambda 到底有什么区别呢？这得从 Lambda 在字节码层面的表示方式说起。</p>
<p>Lambda 的实现方式一般有以下几种：</p>
<ol>
<li>内部类</li>
<li>方法句柄 <a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/8/docs/api/java/lang/invoke/MethodHandle.html">MethodHandle</a></li>
<li>动态代理</li>
<li>其他方式</li>
</ol>
<p>每种方式都有其优缺点，编译器在选择实现方式时，主要考量的两个因素是：</p>
<ol>
<li>在不依赖特定的实现方式的情况下最大限度的提高未来优化的灵活性</li>
<li>字节码层面表示的稳定性</li>
</ol>
<p>由于 Lambda 的实现会产生匿名方法，为了避免不必要的匿名方法，Java 或者 Kotlin 都支持在 Lambda 和方法引用之间进行转换，也就是说，通过方法引用来替代 Lambda，例如：</p>
<ul>
<li><p>Lambda 表示</p>
  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">listOf(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>).forEach &#123;</span><br><span class="line">    println(it)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>方法引用表示</p>
  <figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listOf(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>).forEach(::println)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Function-Reference-in-Kotlin"><a href="#Function-Reference-in-Kotlin" class="headerlink" title="Function Reference in Kotlin"></a>Function Reference in Kotlin</h2><p>在 Kotlin 中，<a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReference.java">FunctionReference</a> 在字节码层面主要是通过 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReferenceImpl.java">FunctionReferenceImpl</a> 来实现，在 Kotlin 1.7+ 以后，新增了 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunInterfaceConstructorReference.java">FunInterfaceConstructorReference</a>，例如：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="keyword">interface</span> IFoo &#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> iFooCtor = ::IFoo</span><br></pre></td></tr></table></figure>

<p>所以，只要 Koltin 代码中用了方法引用，编译出来的 class 文件中就会出现 <code>FunctionReferenceImpl</code>，说了半天，这跟兼容性到底有啥关系？</p>
<h2 id="Kotlin-1-3-Function-Reference-的缺点"><a href="#Kotlin-1-3-Function-Reference-的缺点" class="headerlink" title="Kotlin 1.3 Function Reference 的缺点"></a>Kotlin 1.3 Function Reference 的缺点</h2><p>在 Kotlin 中，我们经常会写出如下的代码：</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">call</span><span class="params">(func: () -&gt; <span class="type">Unit</span>)</span></span> &#123;</span><br><span class="line">    func()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">call(::func)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>这样写有什么什么问题吗？</p>
</blockquote>
<p>表面上看起来完全没毛病，但是，从字节码层面来看，这里就有很多问题了，以上的代码反编译成 Java 大致长这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">refs</span>/LambdaKt$main$<span class="number">1</span> <span class="keyword">extends</span> <span class="title class_">kotlin</span>/jvm/internal/FunctionReference  <span class="keyword">implements</span> <span class="title class_">kotlin</span>/jvm/functions/Function0  &#123;</span><br><span class="line">    <span class="keyword">public</span> synthetic bridge <span class="title function_">invoke</span><span class="params">()</span>Ljava/lang/Object;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="title function_">invoke</span><span class="params">()</span>V</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overrides CallableReference#getOwner</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="title function_">getOwner</span><span class="params">()</span>Lkotlin/reflect/KDeclarationContainer;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overrides CallableReference#getName</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="title function_">getName</span><span class="params">()</span>Ljava/lang/String;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// overrides CallableReference#getSignature</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="title function_">getSignature</span><span class="params">()</span>Ljava/lang/String;</span><br><span class="line"></span><br><span class="line">    &lt;init&gt;()V</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> Lrefs/LambdaKt$main$<span class="number">1</span>; INSTANCE</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &lt;clinit&gt;()V</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>大家看出问题了吗？</p>
<h2 id="Kotlin-1-4-Callable-Reference-优化"><a href="#Kotlin-1-4-Callable-Reference-优化" class="headerlink" title="Kotlin 1.4 Callable Reference 优化"></a>Kotlin 1.4 Callable Reference 优化</h2><p>通过上述的反编译代码，我们不难发现，Kotlin 编译器生成了很多额外的方法，而这些方法其实大部分都很少用到，对于一些几乎不怎么用到的方法，为什么要生成呢？能不能不生成呢？</p>
<p>答案是肯定的，这也就是 Kotlin 1.4 针对 <code>FunctionReference</code> 的优化，如下图所示：</p>
<img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgZGF0YS1kaWFncmFtLXR5cGU9IkNMQVNTIiBoZWlnaHQ9IjUwNnB4IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJub25lIiBzdHlsZT0id2lkdGg6MTAyOXB4O2hlaWdodDo1MDZweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAxMDI5IDUwNiIgd2lkdGg9IjEwMjlweCIgem9vbUFuZFBhbj0ibWFnbmlmeSI+PGRlZnMvPjxnPjwhLS1jbGFzcyBDYWxsYWJsZVJlZmVyZW5jZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJDYWxsYWJsZVJlZmVyZW5jZSIgZGF0YS1zb3VyY2UtbGluZT0iMSIgZGF0YS11aWQ9ImVudDAwMDIiIGlkPSJlbnRpdHlfQ2FsbGFibGVSZWZlcmVuY2UiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTI5LjQ4NDQiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijc0OC42ODg1IiB4PSIxOS4yNyIgeT0iNyIvPjxlbGxpcHNlIGN4PSIzMjUuNTk1MiIgY3k9IjIzIiBmaWxsPSIjQTlEQ0RGIiByeD0iMTEiIHJ5PSIxMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwYXRoIGQ9Ik0zMjUuNzA0NiwxOC4zNDM4IEwzMjQuNTQ4MywyMy40MjE5IEwzMjYuODc2NCwyMy40MjE5IEwzMjUuNzA0NiwxOC4zNDM4IFogTTMyNC4yMjAyLDE2LjEwOTQgTDMyNy4yMDQ2LDE2LjEwOTQgTDMzMC41NjM5LDI4LjUgTDMyOC4xMTA4LDI4LjUgTDMyNy4zNDUyLDI1LjQzNzUgTDMyNC4wNjM5LDI1LjQzNzUgTDMyMy4zMTM5LDI4LjUgTDMyMC44NzY0LDI4LjUgTDMyNC4yMjAyLDE2LjEwOTQgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZm9udC1zdHlsZT0iaXRhbGljIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyNy41MzgxIiB4PSIzNDYuMDk1MiIgeT0iMjcuODQ2NyI+Q2FsbGFibGVSZWZlcmVuY2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjAuMjciIHgyPSI3NjYuOTU4NSIgeTE9IjM5IiB5Mj0iMzkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNy4yNyIgeT0iNDkuNjQ4NCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjkzLjk3MzYiIHg9IjM5LjI3IiB5PSI1NS45OTUxIj5vd25lcjogQ2xhc3M7PC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI3LjI3IiB5PSI2NS45NDUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTUuMzY4MiIgeD0iMzkuMjciIHk9IjcyLjI5MiI+bmFtZTogU3RyaW5nOzwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSIyNy4yNyIgeT0iODIuMjQyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMS45MTg5IiB4PSIzOS4yNyIgeT0iODguNTg4OSI+c2lnbmF0dXJlOiBTdHJpbmc7PC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjI3LjI3IiB5PSI5OC41MzkxIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTQ0LjI0NTEiIHg9IjM5LjI3IiB5PSIxMDQuODg1NyI+aXNUb3BMZXZlbDogYm9vbGVhbjs8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjAuMjciIHgyPSI3NjYuOTU4NSIgeTE9IjExMi4xODc1IiB5Mj0iMTEyLjE4NzUiLz48ZWxsaXBzZSBjeD0iMzAuMjciIGN5PSIxMjUuODM1OSIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzIyLjY4ODUiIHg9IjM5LjI3IiB5PSIxMjkuMTgyNiI+Q2FsbGFibGVSZWZlcmVuY2UocmVjZWl2ZXI6IE9iamVjdCwgb3duZXI6IENsYXNzLCBuYW1lOiBTdHJpbmcsIHNpZ25hdHVyZTogU3RyaW5nLCBpc1RvcExldmVsOiBib29sZWFuKTwvdGV4dD48L2c+PCEtLWNsYXNzIEZ1bmN0aW9uUmVmZXJlbmNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkZ1bmN0aW9uUmVmZXJlbmNlIiBkYXRhLXNvdXJjZS1saW5lPSI5IiBkYXRhLXVpZD0iZW50MDAwMyIgaWQ9ImVudGl0eV9GdW5jdGlvblJlZmVyZW5jZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI2NC4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI3NDIuNjg2NSIgeD0iMjIuMjciIHk9IjI0NS4zOCIvPjxlbGxpcHNlIGN4PSIzMjMuNDg4OCIgY3k9IjI2MS4zOCIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNMzI2LjQ1NzUsMjY3LjAyMDYgUTMyNS44Nzk0LDI2Ny4zMTc1IDMyNS4yMzg4LDI2Ny40NTgxIFEzMjQuNTk4MSwyNjcuNjE0NCAzMjMuODk1LDI2Ny42MTQ0IFEzMjEuMzk1LDI2Ny42MTQ0IDMyMC4wNjY5LDI2NS45NzM4IFEzMTguNzU0NCwyNjQuMzE3NSAzMTguNzU0NCwyNjEuMTkyNSBRMzE4Ljc1NDQsMjU4LjA2NzUgMzIwLjA2NjksMjU2LjQxMTMgUTMyMS4zOTUsMjU0Ljc1NSAzMjMuODk1LDI1NC43NTUgUTMyNC41OTgxLDI1NC43NTUgMzI1LjIzODgsMjU0LjkxMTMgUTMyNS44OTUsMjU1LjA2NzUgMzI2LjQ1NzUsMjU1LjM2NDQgTDMyNi40NTc1LDI1OC4wODMxIFEzMjUuODMyNSwyNTcuNTA1IDMyNS4yMzg4LDI1Ny4yMzk0IFEzMjQuNjQ1LDI1Ni45NTgxIDMyNC4wMiwyNTYuOTU4MSBRMzIyLjY3NjMsMjU2Ljk1ODEgMzIxLjk4ODgsMjU4LjAzNjMgUTMyMS4zMDEzLDI1OS4wOTg4IDMyMS4zMDEzLDI2MS4xOTI1IFEzMjEuMzAxMywyNjMuMjg2MyAzMjEuOTg4OCwyNjQuMzY0NCBRMzIyLjY3NjMsMjY1LjQyNjkgMzI0LjAyLDI2NS40MjY5IFEzMjQuNjQ1LDI2NS40MjY5IDMyNS4yMzg4LDI2NS4xNjEzIFEzMjUuODMyNSwyNjQuODggMzI2LjQ1NzUsMjY0LjMwMTkgTDMyNi40NTc1LDI2Ny4wMjA2IFogIiBmaWxsPSIjMDAwMDAwIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTMxLjc0OSIgeD0iMzQzLjk4ODgiIHk9IjI2Ni4yMjY3Ij5GdW5jdGlvblJlZmVyZW5jZTwvdGV4dD48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHgxPSIyMy4yNyIgeDI9Ijc2My45NTY1IiB5MT0iMjc3LjM4IiB5Mj0iMjc3LjM4Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iMjMuMjciIHgyPSI3NjMuOTU2NSIgeTE9IjI4NS4zOCIgeTI9IjI4NS4zOCIvPjxlbGxpcHNlIGN4PSIzMy4yNyIgY3k9IjI5OS4wMjg0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3MTYuNjg2NSIgeD0iNDIuMjciIHk9IjMwMi4zNzUxIj5GdW5jdGlvblJlZmVyZW5jZShhcml0eTogaW50LCByZWNlaXZlcjogT2JqZWN0LCBvd25lcjogQ2xhc3MsIG5hbWU6IFN0cmluZywgc2lnbmF0dXJlOiBTdHJpbmcsIGZsYWdzOiBpbnQpPC90ZXh0PjwvZz48IS0tY2xhc3MgRnVuY3Rpb25CYXNlLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1lbnRpdHk9IkZ1bmN0aW9uQmFzZSIgZGF0YS1zb3VyY2UtbGluZT0iMTAiIGRhdGEtdWlkPSJlbnQwMDA1IiBpZD0iZW50aXR5X0Z1bmN0aW9uQmFzZSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0OCIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTI2LjQwNDMiIHg9IjgyNS40MSIgeT0iNDcuNzUiLz48ZWxsaXBzZSBjeD0iODQwLjQxIiBjeT0iNjMuNzUiIGZpbGw9IiNCNEE3RTUiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTgzNi4zMzE5LDU5LjUxNTYgTDgzNi4zMzE5LDU3LjM1OTQgTDg0My43MjI1LDU3LjM1OTQgTDg0My43MjI1LDU5LjUxNTYgTDg0MS4yNTM4LDU5LjUxNTYgTDg0MS4yNTM4LDY3LjU5MzggTDg0My43MjI1LDY3LjU5MzggTDg0My43MjI1LDY5Ljc1IEw4MzYuMzMxOSw2OS43NSBMODM2LjMzMTksNjcuNTkzOCBMODM4LjgwMDYsNjcuNTkzOCBMODM4LjgwMDYsNTkuNTE1NiBMODM2LjMzMTksNTkuNTE1NiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXN0eWxlPSJpdGFsaWMiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTQuNDA0MyIgeD0iODU0LjQxIiB5PSI2OC41OTY3Ij5GdW5jdGlvbkJhc2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iODI2LjQxIiB4Mj0iOTUwLjgxNDMiIHkxPSI3OS43NSIgeTI9Ijc5Ljc1Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iODI2LjQxIiB4Mj0iOTUwLjgxNDMiIHkxPSI4Ny43NSIgeTI9Ijg3Ljc1Ii8+PC9nPjwhLS1jbGFzcyBGdW5jdGlvblJlZmVyZW5jZUltcGwtLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLWVudGl0eT0iRnVuY3Rpb25SZWZlcmVuY2VJbXBsIiBkYXRhLXNvdXJjZS1saW5lPSIxMyIgZGF0YS11aWQ9ImVudDAwMDciIGlkPSJlbnRpdHlfRnVuY3Rpb25SZWZlcmVuY2VJbXBsIj48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjgwLjU5MzgiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9Ijc3My4yMjk1IiB4PSI3IiB5PSI0MTguNTciLz48ZWxsaXBzZSBjeD0iMzA4LjIxODgiIGN5PSI0MzQuNTciIGZpbGw9IiNBREQxQjIiIHJ4PSIxMSIgcnk9IjExIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBhdGggZD0iTTMxMS4xODc1LDQ0MC4yMTA2IFEzMTAuNjA5NCw0NDAuNTA3NSAzMDkuOTY4OCw0NDAuNjQ4MSBRMzA5LjMyODEsNDQwLjgwNDQgMzA4LjYyNSw0NDAuODA0NCBRMzA2LjEyNSw0NDAuODA0NCAzMDQuNzk2OSw0MzkuMTYzOCBRMzAzLjQ4NDQsNDM3LjUwNzUgMzAzLjQ4NDQsNDM0LjM4MjUgUTMwMy40ODQ0LDQzMS4yNTc1IDMwNC43OTY5LDQyOS42MDEzIFEzMDYuMTI1LDQyNy45NDUgMzA4LjYyNSw0MjcuOTQ1IFEzMDkuMzI4MSw0MjcuOTQ1IDMwOS45Njg4LDQyOC4xMDEzIFEzMTAuNjI1LDQyOC4yNTc1IDMxMS4xODc1LDQyOC41NTQ0IEwzMTEuMTg3NSw0MzEuMjczMSBRMzEwLjU2MjUsNDMwLjY5NSAzMDkuOTY4OCw0MzAuNDI5NCBRMzA5LjM3NSw0MzAuMTQ4MSAzMDguNzUsNDMwLjE0ODEgUTMwNy40MDYzLDQzMC4xNDgxIDMwNi43MTg4LDQzMS4yMjYzIFEzMDYuMDMxMyw0MzIuMjg4OCAzMDYuMDMxMyw0MzQuMzgyNSBRMzA2LjAzMTMsNDM2LjQ3NjMgMzA2LjcxODgsNDM3LjU1NDQgUTMwNy40MDYzLDQzOC42MTY5IDMwOC43NSw0MzguNjE2OSBRMzA5LjM3NSw0MzguNjE2OSAzMDkuOTY4OCw0MzguMzUxMyBRMzEwLjU2MjUsNDM4LjA3IDMxMS4xODc1LDQzNy40OTE5IEwzMTEuMTg3NSw0NDAuMjEwNiBaICIgZmlsbD0iIzAwMDAwMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2Mi4yOTIiIHg9IjMyOC43MTg4IiB5PSI0MzkuNDE2NyI+RnVuY3Rpb25SZWZlcmVuY2VJbXBsPC90ZXh0PjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSI3NzkuMjI5NSIgeTE9IjQ1MC41NyIgeTI9IjQ1MC41NyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgeDE9IjgiIHgyPSI3NzkuMjI5NSIgeTE9IjQ1OC41NyIgeTI9IjQ1OC41NyIvPjxlbGxpcHNlIGN4PSIxOCIgY3k9IjQ3Mi4yMTg0IiBmaWxsPSIjODRCRTg0IiByeD0iMyIgcnk9IjMiIHN0eWxlPSJzdHJva2U6IzAzODA0ODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2MjYuMzQyOCIgeD0iMjciIHk9IjQ3NS41NjUxIj5GdW5jdGlvblJlZmVyZW5jZUltcGwoYXJpdHk6IGludCwgb3duZXI6IENsYXNzLCBuYW1lOiBTdHJpbmcsIHNpZ25hdHVyZTogU3RyaW5nLCBmbGFnczogaW50KTwvdGV4dD48ZWxsaXBzZSBjeD0iMTgiIGN5PSI0ODguNTE1MyIgZmlsbD0iIzg0QkU4NCIgcng9IjMiIHJ5PSIzIiBzdHlsZT0ic3Ryb2tlOiMwMzgwNDg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNzQ3LjIyOTUiIHg9IjI3IiB5PSI0OTEuODYyIj5GdW5jdGlvblJlZmVyZW5jZUltcGwoYXJpdHk6IGludCwgcmVjZWl2ZXI6IE9iamVjdCwgb3duZXI6IENsYXNzLCBuYW1lOiBTdHJpbmcsIHNpZ25hdHVyZTogU3RyaW5nLCBmbGFnczogaW50KTwvdGV4dD48L2c+PCEtLWNsYXNzIEFkYXB0ZWRGdW5jdGlvblJlZmVyZW5jZS0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtZW50aXR5PSJBZGFwdGVkRnVuY3Rpb25SZWZlcmVuY2UiIGRhdGEtc291cmNlLWxpbmU9IjE4IiBkYXRhLXVpZD0iZW50MDAwOSIgaWQ9ImVudGl0eV9BZGFwdGVkRnVuY3Rpb25SZWZlcmVuY2UiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTYyLjA3ODEiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIyMi42NjgiIHg9IjgwMC4yOCIgeT0iMTk2LjQ5Ii8+PGVsbGlwc2UgY3g9IjgxNS4yOCIgY3k9IjIxMi40OSIgZmlsbD0iI0FERDFCMiIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cGF0aCBkPSJNODE4LjI0ODgsMjE4LjEzMDYgUTgxNy42NzA2LDIxOC40Mjc1IDgxNy4wMywyMTguNTY4MSBRODE2LjM4OTQsMjE4LjcyNDQgODE1LjY4NjMsMjE4LjcyNDQgUTgxMy4xODYzLDIxOC43MjQ0IDgxMS44NTgxLDIxNy4wODM4IFE4MTAuNTQ1NiwyMTUuNDI3NSA4MTAuNTQ1NiwyMTIuMzAyNSBRODEwLjU0NTYsMjA5LjE3NzUgODExLjg1ODEsMjA3LjUyMTMgUTgxMy4xODYzLDIwNS44NjUgODE1LjY4NjMsMjA1Ljg2NSBRODE2LjM4OTQsMjA1Ljg2NSA4MTcuMDMsMjA2LjAyMTMgUTgxNy42ODYzLDIwNi4xNzc1IDgxOC4yNDg4LDIwNi40NzQ0IEw4MTguMjQ4OCwyMDkuMTkzMSBRODE3LjYyMzgsMjA4LjYxNSA4MTcuMDMsMjA4LjM0OTQgUTgxNi40MzYzLDIwOC4wNjgxIDgxNS44MTEzLDIwOC4wNjgxIFE4MTQuNDY3NSwyMDguMDY4MSA4MTMuNzgsMjA5LjE0NjMgUTgxMy4wOTI1LDIxMC4yMDg4IDgxMy4wOTI1LDIxMi4zMDI1IFE4MTMuMDkyNSwyMTQuMzk2MyA4MTMuNzgsMjE1LjQ3NDQgUTgxNC40Njc1LDIxNi41MzY5IDgxNS44MTEzLDIxNi41MzY5IFE4MTYuNDM2MywyMTYuNTM2OSA4MTcuMDMsMjE2LjI3MTMgUTgxNy42MjM4LDIxNS45OSA4MTguMjQ4OCwyMTUuNDExOSBMODE4LjI0ODgsMjE4LjEzMDYgWiAiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxOTAuNjY4IiB4PSI4MjkuMjgiIHk9IjIxNy4zMzY3Ij5BZGFwdGVkRnVuY3Rpb25SZWZlcmVuY2U8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iODAxLjI4IiB4Mj0iMTAyMS45NDgiIHkxPSIyMjguNDkiIHkyPSIyMjguNDkiLz48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI4MDguMjgiIHk9IjIzOS4xMzg0Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTE2LjcwMzEiIHg9IjgyMC4yOCIgeT0iMjQ1LjQ4NTEiPnJlY2VpdmVyOiBPYmplY3Q7PC90ZXh0PjxyZWN0IGZpbGw9Im5vbmUiIGhlaWdodD0iNiIgc3R5bGU9InN0cm9rZTojQzgyOTMwO3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjYiIHg9IjgwOC4yOCIgeT0iMjU1LjQzNTMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI5My45NzM2IiB4PSI4MjAuMjgiIHk9IjI2MS43ODIiPm93bmVyOiBDbGFzczs8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iODA4LjI4IiB5PSIyNzEuNzMyMiIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9Ijk1LjM2ODIiIHg9IjgyMC4yOCIgeT0iMjc4LjA3ODkiPm5hbWU6IFN0cmluZzs8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iODA4LjI4IiB5PSIyODguMDI5MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEyMS45MTg5IiB4PSI4MjAuMjgiIHk9IjI5NC4zNzU3Ij5zaWduYXR1cmU6IFN0cmluZzs8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iODA4LjI4IiB5PSIzMDQuMzI1OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0NC4yNDUxIiB4PSI4MjAuMjgiIHk9IjMxMC42NzI2Ij5pc1RvcExldmVsOiBib29sZWFuOzwvdGV4dD48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjYiIHN0eWxlPSJzdHJva2U6I0M4MjkzMDtzdHJva2Utd2lkdGg6MTsiIHdpZHRoPSI2IiB4PSI4MDguMjgiIHk9IjMyMC42MjI4Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNjQuMTM0OCIgeD0iODIwLjI4IiB5PSIzMjYuOTY5NSI+YXJpdHk6IGludDs8L3RleHQ+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI2IiBzdHlsZT0ic3Ryb2tlOiNDODI5MzA7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iNiIgeD0iODA4LjI4IiB5PSIzMzYuOTE5NyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYwLjk5NzEiIHg9IjgyMC4yOCIgeT0iMzQzLjI2NjQiPmZsYWdzOiBpbnQ8L3RleHQ+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB4MT0iODAxLjI4IiB4Mj0iMTAyMS45NDgiIHkxPSIzNTAuNTY4MSIgeTI9IjM1MC41NjgxIi8+PC9nPjwhLS1yZXZlcnNlIGxpbmsgQ2FsbGFibGVSZWZlcmVuY2UgdG8gRnVuY3Rpb25SZWZlcmVuY2UtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iQ2FsbGFibGVSZWZlcmVuY2UiIGRhdGEtZW50aXR5LTI9IkZ1bmN0aW9uUmVmZXJlbmNlIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImxuazQiIGlkPSJsaW5rX0NhbGxhYmxlUmVmZXJlbmNlX0Z1bmN0aW9uUmVmZXJlbmNlIj48cGF0aCBkPSJNMzkzLjYxLDE1NC45NCBDMzkzLjYxLDE5MC45OSAzOTMuNjEsMjE2LjM3IDM5My42MSwyNDUuMSIgZmlsbD0ibm9uZSIgaWQ9IkNhbGxhYmxlUmVmZXJlbmNlLWJhY2t0by1GdW5jdGlvblJlZmVyZW5jZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iMzkzLjYxLDEzNi45NCwzODcuNjEsMTU0Ljk0LDM5OS42MSwxNTQuOTQsMzkzLjYxLDEzNi45NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIEZ1bmN0aW9uQmFzZSB0byBGdW5jdGlvblJlZmVyZW5jZS0tPjxnIGNsYXNzPSJsaW5rIiBkYXRhLWVudGl0eS0xPSJGdW5jdGlvbkJhc2UiIGRhdGEtZW50aXR5LTI9IkZ1bmN0aW9uUmVmZXJlbmNlIiBkYXRhLXNvdXJjZS1saW5lPSIxMCIgZGF0YS11aWQ9ImxuazYiIGlkPSJsaW5rX0Z1bmN0aW9uQmFzZV9GdW5jdGlvblJlZmVyZW5jZSI+PHBhdGggZD0iTTgzOS44MjA4LDEwNi4wOTA5IEM4MjAuMjAwOCwxMTkuMDUwOSA4MDkuNjgsMTI0LjkgNzg1LjYxLDEzNi40OSBDNjkyLjUsMTgxLjMxIDU4MS4xLDIxOS43NiA1MDAuODksMjQ0Ljk2IiBmaWxsPSJub25lIiBpZD0iRnVuY3Rpb25CYXNlLWJhY2t0by1GdW5jdGlvblJlZmVyZW5jZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Ny4wLDcuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9Ijg1NC44NCw5Ni4xNyw4MzYuNTEzOSwxMDEuMDg0NSw4NDMuMTI3OCwxMTEuMDk3Myw4NTQuODQsOTYuMTciIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLXJldmVyc2UgbGluayBGdW5jdGlvblJlZmVyZW5jZSB0byBGdW5jdGlvblJlZmVyZW5jZUltcGwtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRnVuY3Rpb25SZWZlcmVuY2UiIGRhdGEtZW50aXR5LTI9IkZ1bmN0aW9uUmVmZXJlbmNlSW1wbCIgZGF0YS1zb3VyY2UtbGluZT0iMTQiIGRhdGEtdWlkPSJsbms4IiBpZD0ibGlua19GdW5jdGlvblJlZmVyZW5jZV9GdW5jdGlvblJlZmVyZW5jZUltcGwiPjxwYXRoIGQ9Ik0zOTMuNjEsMzI3Ljc3IEMzOTMuNjEsMzU3Ljg3IDM5My42MSwzODUuNTQgMzkzLjYxLDQxOC4yIiBmaWxsPSJub25lIiBpZD0iRnVuY3Rpb25SZWZlcmVuY2UtYmFja3RvLUZ1bmN0aW9uUmVmZXJlbmNlSW1wbCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxwb2x5Z29uIGZpbGw9Im5vbmUiIHBvaW50cz0iMzkzLjYxLDMwOS43NywzODcuNjEsMzI3Ljc3LDM5OS42MSwzMjcuNzcsMzkzLjYxLDMwOS43NyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjwvZz48IS0tcmV2ZXJzZSBsaW5rIEZ1bmN0aW9uQmFzZSB0byBBZGFwdGVkRnVuY3Rpb25SZWZlcmVuY2UtLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iRnVuY3Rpb25CYXNlIiBkYXRhLWVudGl0eS0yPSJBZGFwdGVkRnVuY3Rpb25SZWZlcmVuY2UiIGRhdGEtc291cmNlLWxpbmU9IjE5IiBkYXRhLXVpZD0ibG5rMTAiIGlkPSJsaW5rX0Z1bmN0aW9uQmFzZV9BZGFwdGVkRnVuY3Rpb25SZWZlcmVuY2UiPjxwYXRoIGQ9Ik04OTMuMjY3NCwxMTQuMDA2NiBDODk2LjAyNzQsMTM4LjQ3NjYgODk4LjUsMTYwLjM3IDkwMi41NywxOTYuMzYiIGZpbGw9Im5vbmUiIGlkPSJGdW5jdGlvbkJhc2UtYmFja3RvLUFkYXB0ZWRGdW5jdGlvblJlZmVyZW5jZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxO3N0cm9rZS1kYXNoYXJyYXk6Ny4wLDcuMDsiLz48cG9seWdvbiBmaWxsPSJub25lIiBwb2ludHM9Ijg5MS4yNSw5Ni4xMiw4ODcuMzA1MywxMTQuNjc5MSw4OTkuMjI5NiwxMTMuMzM0MSw4OTEuMjUsOTYuMTIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48L2c+PCEtLVNSQz1balBCSElpRDA0NE5WeW5OcE02ZG8wLWNKNVdIMUFBV19DRGRTWGZORFJEWVRMYU53eG9STTZDQk04ZkprdXlwRXQ3RmxCYlRIMG5pYnVwWDZNaERwTjNheU9PaTBDUTNGWkZmSmE3eUpYOUJNbXhOTEpxc3VIS2RGNmdtcU9vdFFIYlh0OE1kTy1FQXhILXBYSWdneVRzMHZqZlFmd1lCMG1FdTdtS3RyMmdGdkozLVZBVVVmUGR2QXhJT3hQRGRIdmxyRVo1ZWxhcXN5QXdHLTVPMWpFdVNNZWpGTzdTU25jNk13UXk3MXdhVDlMZGhpWXVyaTdKVm5VemF2X2VTVXlqVDN3a3ZGcmM1a25kaTF0TnliaFhGOVJTc1RlYXd6ZHQtXzhpNVBOVnQzNXBKNUNMT2NKemRYMm0wMF0tLT48L2c+PC9zdmc+'>

<p>Kotlin 1.4 增加了 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/AdaptedFunctionReference.java">AdaptedFunctionReference</a>，同时也在 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReferenceImpl.java">FunctionReferenceImpl</a> 中新增加了 2 个构造方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">FunctionReferenceImpl</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="type">int</span> arity,</span></span><br><span class="line"><span class="params">    Class owner,</span></span><br><span class="line"><span class="params">    String name,</span></span><br><span class="line"><span class="params">    String signature,</span></span><br><span class="line"><span class="params">    <span class="type">int</span> flags</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="comment">/* ... */</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">FunctionReferenceImpl</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="type">int</span> arity,</span></span><br><span class="line"><span class="params">    Object receiver,</span></span><br><span class="line"><span class="params">    Class owner,</span></span><br><span class="line"><span class="params">    String name,</span></span><br><span class="line"><span class="params">    String signature,</span></span><br><span class="line"><span class="params">    <span class="type">int</span> flags</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(<span class="comment">/* ... */</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，通过在 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReferenceImpl.java">FunctionReferenceImpl</a> 的父类 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/FunctionReference.java">FunctionReference</a> 中增加了 1 个构造方法将参数传给基类 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/CallableReference.java">CallableReference</a>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">FunctionReference</span><span class="params">(</span></span><br><span class="line"><span class="params">    <span class="type">int</span> arity,</span></span><br><span class="line"><span class="params">    Object receiver,</span></span><br><span class="line"><span class="params">    Class owner,</span></span><br><span class="line"><span class="params">    String name,</span></span><br><span class="line"><span class="params">    String signature,</span></span><br><span class="line"><span class="params">    <span class="type">int</span> flags</span></span><br><span class="line"><span class="params">)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(receiver, owner, name, signature, (flags &amp; <span class="number">1</span>) == <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">this</span>.arity = arity;</span><br><span class="line">    <span class="built_in">this</span>.flags = flags &gt;&gt; <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后，在父类 <a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/libraries/stdlib/jvm/runtime/kotlin/jvm/internal/CallableReference.java">CallableReference</a> 中增加相关的字段、构造方法以及 <em>getter</em> 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> Class owner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> String signature;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">boolean</span> isTopLevel;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SinceKotlin(version = &quot;1.4&quot;)</span></span><br><span class="line"><span class="keyword">protected</span> <span class="title function_">CallableReference</span><span class="params">(Object receiver, Class owner, String name, String signature, <span class="type">boolean</span> isTopLevel)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.receiver = receiver;</span><br><span class="line">    <span class="built_in">this</span>.owner = owner;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">    <span class="built_in">this</span>.signature = signature;</span><br><span class="line">    <span class="built_in">this</span>.isTopLevel = isTopLevel;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>所以，原来在匿名内部类中生成的大部分返回值为常量的方法通过构造传递给基类来实现了，从而减小了整个应用的字节码大小。</p>
<p>但是，这个优化是默认启用的，这就导致同样的一份 Kotlin 代码，编译出来的字节码不兼容，Kotlin 1.4 以上编译出来的字节码中引入了 Kotlin 1.4 以上才有的 <code>FunctionReferenceImpl</code> 构造方法，这也是升级 Kotlin 时经常遇到的错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NoSuchMethodError: &#x27;void kotlin.jvm.internal.FunctionReferenceImpl.&lt;init&gt;(int, java.lang.Class, java.lang.String, java.lang.String, int)&#x27;</span><br></pre></td></tr></table></figure>

<p>这对于用 Kotlin 开发的类库来说是很麻烦的事情，就像 Booster，很多工程还在用着低版本的 AGP，而 Booster 又要兼容最新版本的 AGP，而最新版本的 AGP 又要求最低 Kotlin 版本为 1.5，导致了用 Kotlin 1.5 编译出来的 Booster 无法在用在低版本的 AGP 工程中运行，除非显式指定 Kotlin 的版本为 1.5 及以上。</p>
<h2 id="Callable-Reference-的解决方案"><a href="#Callable-Reference-的解决方案" class="headerlink" title="Callable Reference 的解决方案"></a>Callable Reference 的解决方案</h2><p>上面的问题相信工程师都遇到过，通过扒 Kotlin 源码，发现了对于以上优化可以通过编译选项来禁用：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">compileKotlin &#123;</span><br><span class="line">    kotlinOptions&#123;</span><br><span class="line">        freeCompilerArgs = [<span class="string">&quot;-Xno-optimized-callable-references&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>或者</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tasks.withType&lt;KotlinCompile&gt; &#123;</span><br><span class="line">    kotlinOptions &#123;</span><br><span class="line">        freeCompilerArgs = listOf(<span class="string">&quot;-Xno-optimized-callable-references&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那 Kotlin 有没有系统性的解决方案呢？欲知后事如何，且听下回分解 🤪</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/whatsnew15.html">https://kotlinlang.org/docs/whatsnew15.html</a></li>
<li><a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/whatsnew14.html">https://kotlinlang.org/docs/whatsnew14.html</a></li>
<li><a target="_blank" rel="noopener" href="https://youtrack.jetbrains.com/issue/KT-27362">https://youtrack.jetbrains.com/issue/KT-27362</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.jetbrains.com/kotlin/2015/04/upcoming-change-function-types-reform/">https://blog.jetbrains.com/kotlin/2015/04/upcoming-change-function-types-reform/</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/JetBrains/kotlin/blob/master/spec-docs/function-types.md">https://github.com/JetBrains/kotlin/blob/master/spec-docs/function-types.md</a></li>
<li><a target="_blank" rel="noopener" href="https://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html">https://cr.openjdk.java.net/~briangoetz/lambda/lambda-translation.html</a></li>
</ul>
</div><iframe src="/donate/?AliPayQR=/img/AliPayQR.png&amp;WeChatQR=/img/WeChatQR.png&amp;GitHub=undefined&amp;BTCQR=undefined&amp;BTCKEY=undefined&amp;PayPal=undefined" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:300px; width:100%;" frameborder="0" scrolling="no"></iframe><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>johnsonlee</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2022/12/03/do-you-really-know-kotlin-function/">https://johnsonlee.io/2022/12/03/do-you-really-know-kotlin-function/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</li></ul></div><br><div class="tags"><a href="/tags/Compiler/">Compiler</a><a href="/tags/Kotlin/">Kotlin</a><a href="/tags/Lambda/">Lambda</a></div><div class="post-nav"><a class="pre" href="/2022/12/07/do-you-really-know-kotlin-compatibility/">Kotlin 填坑记之 Compatibility</a><a class="next" href="/2022/12/02/booster-v4-15-0-released/">Booster 4.15.0 版本发布</a></div><script type="text/javascript" id="diffblog-plugin-script" async="false" src="https://diff.blog/static/js/diffblog_plugin_v1.js"></script><script>document.getElementById("diffblog-plugin-script").addEventListener('load', () => {
  DiffBlog('0jhfofmazizsde2k5pw64l8p2sy592xanbfvhtabsoy93kenap');
});
</script><div id="container"></div><link rel="preload" type="text/css" href="/libs/gitalk/1.7.2/gitalk.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><script>(function() {
  load(
    '/libs/blueimp-md5/2.10.0/js/md5.js',
    '/libs/gitalk/1.7.2/gitalk.min.js'
  ).then(() => {
    var gitalk = new Gitalk({
      clientID: '80b7a03dd9cce611f9ff',
      clientSecret: 'e3296e3d54d9da61d79ee7cf072fa7a1fb5eebc2',
      repo: 'blog',
      owner: 'johnsonlee',
      admin: ['johnsonlee'],
      id: md5(location.pathname),
      distractionFreeMode: false
    })
    gitalk.render('container')
  })
})();</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://johnsonlee.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul><li><a href="/categories/biology/">Biology (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/career/">Career (10)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/">Computer Science (100)</a><ul style="padding:revert"><li><a href="/categories/computer-science/architecture-design/">Architecture Design (6)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/cloud/">Cloud (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/gradle/">Gradle (4)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/graphics/">Graphics (2)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/java/">Java (12)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/kotlin/">Kotlin (7)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/mobile/">Mobile (10)</a><ul style="padding:revert"><li><a href="/categories/computer-science/mobile/android/">Android (5)</a></li><li><a href="/categories/computer-science/mobile/flutter/">Flutter (1)</a></li></ul></li><li><a href="/categories/computer-science/observability/">Observability (2)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/open-source/">Open Source (56)</a><ul style="padding:revert"><li><a href="/categories/computer-science/open-source/booster/">Booster (56)</a></li></ul></li></ul></li><li><a href="/categories/diy/">DIY (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/Independent-Thinking/">Independent Thinking (10)</a><ul style="padding:revert"></ul></li><li><a href="/categories/Investment/">Investment (3)</a><ul style="padding:revert"></ul></li><li><a href="/categories/life/">Life (8)</a><ul style="padding:revert"></ul></li><li><a href="/categories/reading/">Reading (2)</a><ul style="padding:revert"></ul></li><li><a href="/categories/UI-UX/">UI/UX (1)</a><ul style="padding:revert"><li><a href="/categories/UI-UX/Design-System/">Design System (1)</a><ul style="padding:revert"></ul></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Gradle/" style="font-size: 15px;">Gradle</a> <a href="/tags/java-gradle-plugin/" style="font-size: 15px;">java-gradle-plugin</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/%E7%8B%AC%E7%AB%8B%E6%80%9D%E8%80%83/" style="font-size: 15px;">独立思考</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Build/" style="font-size: 15px;">Build</a> <a href="/tags/Compiler/" style="font-size: 15px;">Compiler</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/ES5/" style="font-size: 15px;">ES5</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Booster/" style="font-size: 15px;">Booster</a> <a href="/tags/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/" style="font-size: 15px;">性能优化</a> <a href="/tags/ReleaseNote/" style="font-size: 15px;">ReleaseNote</a> <a href="/tags/Stock/" style="font-size: 15px;">Stock</a> <a href="/tags/%E8%81%8C%E5%9C%BA/" style="font-size: 15px;">职场</a> <a href="/tags/UX/" style="font-size: 15px;">UX</a> <a href="/tags/Compatibility/" style="font-size: 15px;">Compatibility</a> <a href="/tags/Lambda/" style="font-size: 15px;">Lambda</a> <a href="/tags/AGP/" style="font-size: 15px;">AGP</a> <a href="/tags/Dart/" style="font-size: 15px;">Dart</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/tags/Coupang/" style="font-size: 15px;">Coupang</a> <a href="/tags/Reveal2021/" style="font-size: 15px;">Reveal2021</a> <a href="/tags/Maven/" style="font-size: 15px;">Maven</a> <a href="/tags/Seoul/" style="font-size: 15px;">Seoul</a> <a href="/tags/Korea/" style="font-size: 15px;">Korea</a> <a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 15px;">音乐</a> <a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/Economics/" style="font-size: 15px;">Economics</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Thinking/" style="font-size: 15px;">Thinking</a> <a href="/tags/Android-Studio/" style="font-size: 15px;">Android Studio</a> <a href="/tags/SPI/" style="font-size: 15px;">SPI</a> <a href="/tags/MVVM/" style="font-size: 15px;">MVVM</a> <a href="/tags/JetPack/" style="font-size: 15px;">JetPack</a> <a href="/tags/%E9%A2%84%E5%8A%A0%E8%BD%BD/" style="font-size: 15px;">预加载</a> <a href="/tags/%E8%B5%9A%E9%92%B1/" style="font-size: 15px;">赚钱</a> <a href="/tags/Java-8/" style="font-size: 15px;">Java 8</a> <a href="/tags/%E7%A4%BE%E4%BC%9A/" style="font-size: 15px;">社会</a> <a href="/tags/AI/" style="font-size: 15px;">AI</a> <a href="/tags/Evolution/" style="font-size: 15px;">Evolution</a> <a href="/tags/DeepMind/" style="font-size: 15px;">DeepMind</a> <a href="/tags/AlphaFold2/" style="font-size: 15px;">AlphaFold2</a> <a href="/tags/CASP/" style="font-size: 15px;">CASP</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2025/06/23/circle-the-fed-on-chain/">Circle - 链上的美联储</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/06/22/why-i-went-all-in-on-circle/">为什么 All in CRCL?</a></li><li class="post-list-item"><a class="post-list-link" href="/2025/06/21/no-time-to-think-from-bottom-fishing-google-tesla-to-going-all-in-on-circle/">无暇思考：从抄底 Google/Tesla 到 All in Circle</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/07/21/booster-v5-0-0-released/">Booster 5.0.0 版本发布</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/27/living-in-seoul-1/">Living in Seoul (1)</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/04/20/recommended-reading-thinking/">推荐阅读（思维篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/01/27/use-better-metrics-for-build-performance-measurement/">洞察构建性能：选择正确的 Metrics</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/01/07/an-email-to-my-boss/">一封写给老板的邮件</a></li><li class="post-list-item"><a class="post-list-link" href="/2024/01/01/where-the-heart-leads-the-truth-follows/">心之所向，道之所在</a></li><li class="post-list-item"><a class="post-list-link" href="/2023/10/08/running-android-code-on-jvm/">在 JVM 上运行 Android ？！</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/johnsonlee" title="GitHub" target="_blank">GitHub</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2025 <a href="/." rel="nofollow">Johnson Lee.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-154930895-1','auto');ga('send','pageview');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = 1;
  hm.src = 'https://hm.baidu.com/hm.js?' + 'bceb83a2d24731111cbcf93ac3960952';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script><script>load('/libs/viz/2.1.2/viz.js').then(() => {
  let graphs = document.querySelectorAll('.graphviz')

  if (graphs.length > 0) {
    for (let graph of graphs) {
      let svg = undefined;
      try {
        svg = Viz(graph.textContent.replaceAll('–', '--'), 'svg');
      } catch(e) {
        svg = `<pre class="error">${e}</pre>`;
      }
      graph.outerHTML = svg;
    }
  }
});
</script><script>load('/libs/jquery/3.4.0/jquery.min.js').then(() => {
  load(
    '/js/search.js',
    '/js/share.js',
    '/js/smartresize.js',
    '/js/totop.js'
  ).then(() => {
    load('/js/codeblock-resizer.js').then(() => {});
    ('function' == typeof setupSearch) && setupSearch();
  });
});</script></div></body></html>