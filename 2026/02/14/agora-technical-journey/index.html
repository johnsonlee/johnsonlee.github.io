<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="为了更深入地了解 AI 的思维和推理模式，脑子里冒出一个大胆的想法——让两个 AI 像人一样互相辩论。于是就有了 Agora 这个项目。 一开始想得很简单：用 WebDriver 启两个浏览器窗口，通过注入的 JS 作为桥梁，把 A 的输出喂给 B，B 的回复再喂回 A。 为什么走浏览器自动化而不是 API？三个平台的会员我都有，浏览器里聊天不要钱，但 API 各收各的钱、各配各的 SDK——没必"><meta name="baidu-site-verification" content="sSd2p2uQfO"><meta name="keywords" content="李景森,架构设计,滴滴,快手,性能优化,我在滴滴做架构,johnsonlee,johnson,lijingsen,jingsen,booster,virtualapk,android,java,kotlin,performance,optimizer,flutter,javascript,typescript,node.js"><link rel="canonical" href="https://johnsonlee.io/2026/02/14/agora-technical-journey/"><meta property="og:title" content="Agora 的技术选型与踩坑实录"><meta property="og:description" content="为了更深入地了解 AI 的思维和推理模式，脑子里冒出一个大胆的想法——让两个 AI 像人一样互相辩论。于是就有了 Agora 这个项目。 一开始想得很简单：用 WebDriver 启两个浏览器窗口，通过注入的 JS 作为桥梁，把 A 的输出喂给 B，B 的回复再喂回 A。 为什么走浏览器自动化而不是 API？三个平台的会员我都有，浏览器里聊天不要钱，但 API 各收各的钱、各配各的 SDK——没必"><meta property="og:type" content="article"><meta property="og:url" content="https://johnsonlee.io/2026/02/14/agora-technical-journey/"><meta property="og:site_name" content="Johnson Lee"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2026-02-14T23:27:00.000Z"><meta property="article:author" content="Johnson Lee"><meta property="article:tag" content="AI"><meta property="article:tag" content="Browser Automation"><meta property="article:tag" content="Puppeteer"><meta property="article:tag" content="CDP"><meta property="article:tag" content="DOM"><meta property="article:tag" content="Web Scraping"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Agora 的技术选型与踩坑实录"><meta name="twitter:description" content="为了更深入地了解 AI 的思维和推理模式，脑子里冒出一个大胆的想法——让两个 AI 像人一样互相辩论。于是就有了 Agora 这个项目。 一开始想得很简单：用 WebDriver 启两个浏览器窗口，通过注入的 JS 作为桥梁，把 A 的输出喂给 B，B 的回复再喂回 A。 为什么走浏览器自动化而不是 API？三个平台的会员我都有，浏览器里聊天不要钱，但 API 各收各的钱、各配各的 SDK——没必"><title>Agora 的技术选型与踩坑实录 | Johnson Lee</title><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300"><link rel="stylesheet" type="text/css" href="/css/style.css"><link rel="preload" type="text/css" href="/libs/pure/1.0.0/pure-min.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><link rel="preload" type="text/css" href="/libs/pure/1.0.0/grids-responsive-min.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><link rel="preload" href="/libs/font-awesome/4.7.0/css/font-awesome.min.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="/libs/loadCSS/2.1.0/loadCSS.js" async></script><script>function load() {
  return Promise.all(Array.prototype.map.call(arguments, (src) => {
    return new Promise((resolve, reject) => {
      var script = document.createElement("script");
      script.asrc = 1;
      script.src = src;
      var sibling = document.getElementsByTagName("script")[0];
      sibling.parentNode.insertBefore(script, sibling);
      script.onload = function() {
        resolve();
      }
    })
  }));
}
String.prototype.replaceAll = function(search, replacement) {
  var target = this;
  return target.split(search).join(replacement);
};</script><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Agora 的技术选型与踩坑实录</h1><a id="logo" href="/.">Johnson Lee</a><p class="description">Get into trouble, make mistakes, fight, love, live</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/tags/"><i class="fa fa-tag"> 标签</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Agora 的技术选型与踩坑实录</h1><div class="post-meta">Feb 14, 2026<span> | </span><span class="category"><a href="/categories/computer-science/">Computer Science</a><a href="/categories/computer-science/architecture-design/"> / Architecture Design</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.7k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 6</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><p>为了更深入地了解 AI 的思维和推理模式，脑子里冒出一个大胆的想法——让两个 AI 像人一样互相辩论。于是就有了 <a target="_blank" rel="noopener" href="https://github.com/johnsonlee/agora">Agora</a> 这个项目。</p>
<p>一开始想得很简单：用 WebDriver 启两个浏览器窗口，通过注入的 JS 作为桥梁，把 A 的输出喂给 B，B 的回复再喂回 A。</p>
<p>为什么走浏览器自动化而不是 API？三个平台的会员我都有，浏览器里聊天不要钱，但 API 各收各的钱、各配各的 SDK——没必要为一个实验再花一份。</p>
<p>思路很直接，实现却经历了三轮推倒重来。</p>
<h2 id="Round-1：Playwright，出师未捷"><a href="#Round-1：Playwright，出师未捷" class="headerlink" title="Round 1：Playwright，出师未捷"></a>Round 1：Playwright，出师未捷</h2><p>第一版用的 Playwright，毕竟是当下浏览器自动化的主流选择。结果刚跑起来就撞墙了。</p>
<h3 id="反检测是个死结"><a href="#反检测是个死结" class="headerlink" title="反检测是个死结"></a>反检测是个死结</h3><p>Playwright 会注入一系列自动化标记——<code>navigator.webdriver = true</code>、修改过的 <code>Runtime.enable</code> domain，诸如此类。Cloudflare 的 bot detection 一眼就能认出来。Claude.ai 和 ChatGPT 都在第一时间拦截了自动化会话。</p>
<h3 id="Session-留不住"><a href="#Session-留不住" class="headerlink" title="Session 留不住"></a>Session 留不住</h3><p>Playwright 的 browser context 和真实 Chrome 的 user-data 目录不是一回事。登录状态无法跨次运行保持，每次启动都要重新登录、过验证。对于一个需要反复运行的辩论工具来说，这个体验不可接受。</p>
<p><strong>Playwright 解决的是“测试自己的网站”这个问题，不是“操控别人的网站”。</strong> 用途不对，工具再好也白搭。</p>
<h2 id="Round-2：Puppeteer-launch，好了一点但不够"><a href="#Round-2：Puppeteer-launch，好了一点但不够" class="headerlink" title="Round 2：Puppeteer launch，好了一点但不够"></a>Round 2：Puppeteer launch，好了一点但不够</h2><p>换成 <code>puppeteer.launch()</code> 配合 <code>puppeteer-extra-plugin-stealth</code>，情况有所改善。Stealth 插件修补了大量浏览器指纹，但 Cloudflare 还是会间歇性地触发 challenge page。</p>
<p>根本原因在于 <code>puppeteer.launch()</code> 仍然会带上 <code>--enable-automation</code> 等启动参数。Stealth 能在运行时抹掉大部分痕迹，但浏览器进程本身的启动方式已经暴露了意图。</p>
<p>这一轮还有另一个大问题：<strong>我给每个 AI 服务都写了一套 CSS selector。</strong></p>
<p>Claude 的回复在 <code>.agent-turn .markdown</code> 里，ChatGPT 的在 <code>[data-message-author-role=&quot;assistant&quot;]</code> 里，Gemini 又是另一套。流式输出的检测也是各写各的——ChatGPT 用 <code>.result-streaming</code>，Claude 看别的 class。</p>
<p><strong>任何一个服务改一次前端，整套代码就废了。</strong> 这不是 bug，是架构缺陷。</p>
<h2 id="Round-3：spawn-Chrome-CDP-connect-通用-DOM-发现"><a href="#Round-3：spawn-Chrome-CDP-connect-通用-DOM-发现" class="headerlink" title="Round 3：spawn Chrome + CDP connect + 通用 DOM 发现"></a>Round 3：spawn Chrome + CDP connect + 通用 DOM 发现</h2><p>最终方案把浏览器控制拆成了两个阶段。</p>
<h3 id="阶段一：启动一个“干净”的-Chrome"><a href="#阶段一：启动一个“干净”的-Chrome" class="headerlink" title="阶段一：启动一个“干净”的 Chrome"></a>阶段一：启动一个“干净”的 Chrome</h3><p>用 <code>child_process.spawn()</code> 直接拉起 Chrome 进程，带上 <code>--remote-debugging-port</code> 和 <code>--user-data-dir</code>，不经过任何自动化框架。</p>
<p>这个 Chrome 就是一个普通的浏览器。没有 automation flag，没有注入的 JS，Cloudflare 看到的是一个正常用户。首次运行时手动登录一次，session 保存在 <code>./profiles/</code> 里，之后就不用再管了。</p>
<h3 id="阶段二：Puppeteer-只做-CDP-桥接"><a href="#阶段二：Puppeteer-只做-CDP-桥接" class="headerlink" title="阶段二：Puppeteer 只做 CDP 桥接"></a>阶段二：Puppeteer 只做 CDP 桥接</h3><p>登录完成后，用 <code>puppeteer.connect(&#123; browserURL &#125;)</code> 接入已经在运行的 Chrome。此时 Puppeteer 的角色只是一个 CDP client——它没有 launch 过这个浏览器，所以不存在任何自动化痕迹。</p>
<img src='data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMmJldGEzPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGNvbnRlbnRTdHlsZVR5cGU9InRleHQvY3NzIiBkYXRhLWRpYWdyYW0tdHlwZT0iREVTQ1JJUFRJT04iIGhlaWdodD0iNTM4cHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDo2MjFweDtoZWlnaHQ6NTM4cHg7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA2MjEgNTM4IiB3aWR0aD0iNjIxcHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48IS0tY2x1c3RlciBQaGFzZSAxLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBoYXNlIDEiIGRhdGEtc291cmNlLWxpbmU9IjQiIGlkPSJlbnQwMDAyIj48cmVjdCBmaWxsPSJub25lIiBoZWlnaHQ9IjUyNS4xOSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgd2lkdGg9IjI0MyIgeD0iMzQyIiB5PSI3Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGZvbnQtd2VpZ2h0PSJib2xkIiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjYyLjExODIiIHg9IjQzMi40NDA5IiB5PSIyMS45OTUxIj5QaGFzZSAxPC90ZXh0PjwvZz48IS0tY2x1c3RlciBQaGFzZSAyLS0+PGcgY2xhc3M9ImNsdXN0ZXIiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBoYXNlIDIiIGRhdGEtc291cmNlLWxpbmU9IjEwIiBpZD0iZW50MDAxMCI+PHJlY3QgZmlsbD0ibm9uZSIgaGVpZ2h0PSI5Ny4zIiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB3aWR0aD0iMzExIiB4PSI3IiB5PSIxNTIuMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2Mi4xMTgyIiB4PSIxMzEuNDQwOSIgeT0iMTY3LjI5NTEiPlBoYXNlIDI8L3RleHQ+PC9nPjwhLS1lbnRpdHkgTm9kZS5qcy0tPjxnIGNsYXNzPSJlbnRpdHkiIGRhdGEtcXVhbGlmaWVkLW5hbWU9IlBoYXNlIDEuTm9kZS5qcyIgZGF0YS1zb3VyY2UtbGluZT0iNSIgaWQ9ImVudDAwMDMiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iOTIuMTcxOSIgeD0iNDAzLjkxIiB5PSI0MiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMTAiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1IiB4PSI0NzYuMDgxOSIgeT0iNDciLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjQ3NC4wODE5IiB5PSI0OSIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNDc0LjA4MTkiIHk9IjUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iNTIuMTcxOSIgeD0iNDE4LjkxIiB5PSI3NC45OTUxIj5Ob2RlLmpzPC90ZXh0PjwvZz48IS0tZW50aXR5IGNoaWxkX3Byb2Nlc3Muc3Bhd24tLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJQaGFzZSAxLmNoaWxkX3Byb2Nlc3Muc3Bhd24iIGRhdGEtc291cmNlLWxpbmU9IjUiIGlkPSJlbnQwMDA0Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4My44NzYiIHg9IjM1OC4wNiIgeT0iMTg3LjMiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjEwIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNSIgeD0iNTIxLjkzNiIgeT0iMTkyLjMiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjUxOS45MzYiIHk9IjE5NC4zIi8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSI1MTkuOTM2IiB5PSIxOTguMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE0My44NzYiIHg9IjM3My4wNiIgeT0iMjIwLjI5NTEiPmNoaWxkX3Byb2Nlc3Muc3Bhd248L3RleHQ+PC9nPjwhLS1lbnRpdHkgQ2hyb21lID8/LS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iUGhhc2UgMS5DaHJvbWUgLi4iIGRhdGEtc291cmNlLWxpbmU9IjYiIGlkPSJlbnQwMDA2Ij48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjQ2LjI5NjkiIHJ4PSIyLjUiIHJ5PSIyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjEyNy42NzA4IiB4PSIzNTguMTYiIHk9IjMyOS42Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjQ2NS44MzA4IiB5PSIzMzQuNiIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iNDYzLjgzMDgiIHk9IjMzNi42Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSI0NjMuODMwOCIgeT0iMzQwLjYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI4Ny42NzA4IiB4PSIzNzMuMTYiIHk9IjM2Mi41OTUxIj5DaHJvbWUgJiMzNjgyNzsmIzMxMjQzOzwvdGV4dD48L2c+PCEtLWVudGl0eSBBSSBXZWIgVUktLT48ZyBjbGFzcz0iZW50aXR5IiBkYXRhLXF1YWxpZmllZC1uYW1lPSJQaGFzZSAxLkFJIFdlYiBVSSIgZGF0YS1zb3VyY2UtbGluZT0iNyIgaWQ9ImVudDAwMDgiPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iNDYuMjk2OSIgcng9IjIuNSIgcnk9IjIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTA4LjMyNTIiIHg9IjM2Ny44NCIgeT0iNDY5Ljg5Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjQ1Ni4xNjUyIiB5PSI0NzQuODkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjQ1NC4xNjUyIiB5PSI0NzYuODkiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjIiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjQiIHg9IjQ1NC4xNjUyIiB5PSI0ODAuODkiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI2OC4zMjUyIiB4PSIzODIuODQiIHk9IjUwMi44ODUxIj5BSSBXZWIgVUk8L3RleHQ+PC9nPjwhLS1lbnRpdHkgUHVwcGV0ZWVyLS0+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iUGhhc2UgMi5QdXBwZXRlZXIiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0iZW50MDAxMSI+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSI0Ni4yOTY5IiByeD0iMi41IiByeT0iMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMTIuMTczOCIgeD0iMjIuOTEiIHk9IjE4Ny4zIi8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIxMCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTUiIHg9IjExNS4wODM4IiB5PSIxOTIuMyIvPjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iNCIgeD0iMTEzLjA4MzgiIHk9IjE5NC4zIi8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIyIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSI0IiB4PSIxMTMuMDgzOCIgeT0iMTk4LjMiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSI3Mi4xNzM4IiB4PSIzNy45MSIgeT0iMjIwLjI5NTEiPlB1cHBldGVlcjwvdGV4dD48L2c+PGcgY2xhc3M9ImVudGl0eSIgZGF0YS1xdWFsaWZpZWQtbmFtZT0iUGhhc2UgMi5HTU4xMyIgZGF0YS1zb3VyY2UtbGluZT0iMTIiIGlkPSJlbnQwMDE0Ij48cGF0aCBkPSJNMTY5LjY2LDE4OS4xNSBMMTY5LjY2LDIwNi40NSBMMTM1LjQyLDIxMC40NSBMMTY5LjY2LDIxNC40NSBMMTY5LjY2LDIzMS43NDM4IEEwLDAgMCAwIDAgMTY5LjY2LDIzMS43NDM4IEwzMDIuMzQ1MywyMzEuNzQzOCBBMCwwIDAgMCAwIDMwMi4zNDUzLDIzMS43NDM4IEwzMDIuMzQ1MywxOTkuMTUgTDI5Mi4zNDUzLDE4OS4xNSBMMTY5LjY2LDE4OS4xNSBBMCwwIDAgMCAwIDE2OS42NiwxODkuMTUiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjxwYXRoIGQ9Ik0yOTIuMzQ1MywxODkuMTUgTDI5Mi4zNDUzLDE5OS4xNSBMMzAyLjM0NTMsMTk5LjE1IEwyOTIuMzQ1MywxODkuMTUiIGZpbGw9IiNGRUZGREQiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEwNC4zNTA1IiB4PSIxNzUuNjYiIHk9IjIwNy4xNDUxIj4mIzIwMTY1OyYjMjAzMTY7IENEUCBjbGllbnQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTExLjY4NTMiIHg9IjE3NS42NiIgeT0iMjIzLjQ0MiI+JiMxOTk4MTsgbGF1bmNoICYjMjc5ODM7JiMzNTI3MjsmIzIyMTIwOzwvdGV4dD48L2c+PCEtLWxpbmsgTm9kZS5qcyB0byBjaGlsZF9wcm9jZXNzLnNwYXduLS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDMiIGRhdGEtZW50aXR5LTI9ImVudDAwMDQiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI1IiBpZD0ibG5rNSI+PHBhdGggZD0iTTQ1MCw4OC41NCBDNDUwLDExNS40NiA0NTAsMTU0LjM2IDQ1MCwxODEuMjEiIGZpbGw9Im5vbmUiIGlkPSJOb2RlLmpzLXRvLWNoaWxkX3Byb2Nlc3Muc3Bhd24iIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQ1MCwxODcuMjEsNDU0LDE3OC4yMSw0NTAsMTgyLjIxLDQ0NiwxNzguMjEsNDUwLDE4Ny4yMSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI3Ljk5OTkiIHg9IjQ1MSIgeT0iMTMyLjI5NTEiPiYjMjE1NTE7JiMyMTE2MDs8L3RleHQ+PC9nPjwhLS1saW5rIGNoaWxkX3Byb2Nlc3Muc3Bhd24gdG8gQ2hyb21lID8/LS0+PGcgY2xhc3M9ImxpbmsiIGRhdGEtZW50aXR5LTE9ImVudDAwMDQiIGRhdGEtZW50aXR5LTI9ImVudDAwMDYiIGRhdGEtbGluay10eXBlPSJkZXBlbmRlbmN5IiBkYXRhLXNvdXJjZS1saW5lPSI2IiBpZD0ibG5rNyI+PHBhdGggZD0iTTQ0NS41LDIzMy45OSBDNDQwLjI4LDI2MC4xNyA0MzIuODg0MSwyOTcuMjE2IDQyNy42NjQxLDMyMy4zNzYiIGZpbGw9Im5vbmUiIGlkPSJjaGlsZF9wcm9jZXNzLnNwYXduLXRvLUNocm9tZSAmIzM2ODI3OyYjMzEyNDM7IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSI0MjYuNDksMzI5LjI2LDQzMi4xNzM4LDMyMS4yMTY3LDQyNy40Njg0LDMyNC4zNTY3LDQyNC4zMjg1LDMxOS42NTEzLDQyNi40OSwzMjkuMjYiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNzQuMjYxNyIgeD0iNDM5IiB5PSIyNzkuNTk1MSI+LS1yZW1vdGUtZGVidWdnaW5nLXBvcnQ8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTAwLjgwOTYiIHg9IjQ3NS43MjYxIiB5PSIyOTUuODkyIj4tLXVzZXItZGF0YS1kaXI8L3RleHQ+PC9nPjwhLS1saW5rIENocm9tZSA/PyB0byBBSSBXZWIgVUktLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAwNiIgZGF0YS1lbnRpdHktMj0iZW50MDAwOCIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjciIGlkPSJsbms5Ij48cGF0aCBkPSJNNDIyLDM3Ni4yNyBDNDIyLDQwMS45OSA0MjIsNDM3LjgxIDQyMiw0NjMuNTIiIGZpbGw9Im5vbmUiIGlkPSJDaHJvbWUgJiMzNjgyNzsmIzMxMjQzOy10by1BSSBXZWIgVUkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjQyMiw0NjkuNTIsNDI2LDQ2MC41Miw0MjIsNDY0LjUyLDQxOCw0NjAuNTIsNDIyLDQ2OS41MiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjY5Ljk5OTciIHg9IjQzMCIgeT0iNDE5Ljg4NTEiPiYjMjc0OTE7JiMyNDEyMDsmIzI3OTgzOyYjMzUyNzI7JiMyMjEyMDs8L3RleHQ+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iODMuOTk5NiIgeD0iNDIzIiB5PSI0MzYuMTgyIj4mIzI2MDgwOyYjMzMyNTg7JiMyMTE2MDsmIzIxMjcwOyYjMjY2MzE7JiMzNTc2MDs8L3RleHQ+PC9nPjwhLS1saW5rIFB1cHBldGVlciB0byBDaHJvbWUgPz8tLT48ZyBjbGFzcz0ibGluayIgZGF0YS1lbnRpdHktMT0iZW50MDAxMSIgZGF0YS1lbnRpdHktMj0iZW50MDAwNiIgZGF0YS1saW5rLXR5cGU9ImRlcGVuZGVuY3kiIGRhdGEtc291cmNlLWxpbmU9IjExIiBpZD0ibG5rMTIiPjxwYXRoIGQ9Ik0xMTEuMTUsMjM0IEMxMjMuNTYsMjQyLjEgMTM4LjA5LDI1MC44OCAxNTIsMjU3LjYgQzIxOS44NSwyOTAuMzQgMjk2LjM3ODIsMzE1LjY0MjEgMzUyLjE0ODIsMzMyLjIwMjEiIGZpbGw9Im5vbmUiIGlkPSJQdXBwZXRlZXItdG8tQ2hyb21lICYjMzY4Mjc7JiMzMTI0MzsiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjM1Ny45LDMzMy45MSwzNTAuNDEwOSwzMjcuNTEzNiwzNTMuMTA2OCwzMzIuNDg2NywzNDguMTMzNywzMzUuMTgyNywzNTcuOSwzMzMuOTEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTQuNDYwOSIgeD0iMjQ3IiB5PSIyODcuNTk1MSI+Y29ubmVjdCB2aWEgQ0RQPC90ZXh0PjwvZz48P3BsYW50dW1sLXNyYyBUUDB6SW1EMTQ4UngtbkwzLVdxZUxZYTRZR1hmOTIxWWFHSlB4NHRrcmJuY1p6cXoxSU1iSEZuMEFxTXEyQUdtMjd1cUdhMzRGdkN4eHNVdTVvSVduN1JjVkh4VTZURUw1N0ZEVXozY2VYamViUDFWTFA3SU8zS2R1clA4clpGcGI4eVRkYUhzR3Y3VGFlUzhJb2tVZnI1T0phNjRLQWc3dEJYWDJPdXlXQ1FjeWg2eVByaDBzMmVxSDJXWlZwVk1JZzBuUFFTLWUxUEs4QnJ3SUtfN0hOblhPOFBNR3dydzJGZGR0VFZ1aDgwT3F6WEo1ZmNGeElHODkwS2lMamVzWVI3NGU2Ty1qdnB2S1hWUUZfMUNrNVEzN01wM1Rnc0dQSy1aVDNCOXRZeHBYdkZxVGpvYXg2UU8zbnZUZ19KeUVYaUV5a1ROaHhfV3BFTVZDLWo5N0FENXJGLXI1T2g4bVIwbEVMSk53dXVYcm5zcTM0OEJnbEZCSzg3Zi1fN3F1eHU4V2VZYVV0LUpmZkNCWTdYMjhlSHZKUV9fM0cwMD8+PC9nPjwvc3ZnPg=='>

<p><strong>把 launch 权从自动化框架手里拿走，是绕过反检测的关键。</strong></p>
<h3 id="通用-DOM-发现：干掉所有-CSS-selector"><a href="#通用-DOM-发现：干掉所有-CSS-selector" class="headerlink" title="通用 DOM 发现：干掉所有 CSS selector"></a>通用 DOM 发现：干掉所有 CSS selector</h3><p>这是整个项目里我最满意的设计。与其维护每个服务的 selector，不如让程序自己“看懂”页面结构。</p>
<img src='data:image/svg+xml;base64,PD9wbGFudHVtbCAxLjIwMjYuMmJldGEzPz48c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIGNvbnRlbnRTdHlsZVR5cGU9InRleHQvY3NzIiBkYXRhLWRpYWdyYW0tdHlwZT0iQUNUSVZJVFkiIGhlaWdodD0iNzAycHgiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiIHN0eWxlPSJ3aWR0aDozMDRweDtoZWlnaHQ6NzAycHg7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzMDQgNzAyIiB3aWR0aD0iMzA0cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48ZWxsaXBzZSBjeD0iMTUyLjE5ODMiIGN5PSIyMCIgZmlsbD0iIzIyMjIyMiIgcng9IjEwIiByeT0iMTAiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTAzLjk5OTYiIHg9IjEwMC4xOTg1IiB5PSI1MCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjgzLjk5OTYiIHg9IjExMC4xOTg1IiB5PSI3Mi45OTUxIj4mIzM5MDI5OyYjMzg3NTQ7JiMyMTE1MjsmIzM2NzMzOyYjMjM0MzY7JiMyNTEwNDs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI3Ni42ODkxIiB4PSIxMy44NTM4IiB5PSIxMDYuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjI1Ni42ODkxIiB4PSIyMy44NTM4IiB5PSIxMjkuMjkyIj4mIzI1MTk1OyYjMjU1NTE7JiMyNTE1MjsmIzI2Mzc3OyBjb250ZW50ZWRpdGFibGU9InRydWUiICYjMjA4MDM7JiMzMjAzMjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIyOS45OTkxIiB4PSIzNy4xOTg4IiB5PSIxNjIuNTkzOCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIwOS45OTkxIiB4PSI0Ny4xOTg4IiB5PSIxODUuNTg4OSI+JiMyNTM1MzsmIzM4NzU0OyYjMzEyMTU7JiMyNTQ5MDsmIzI0MjA3OyYjNjUyOTI7JiMyMTQ2MjsmIzI2MzY4OyYjMjI4MjM7JiMzMDM0MDsmIzIwMzE2OyYjMjAwMjY7JiMzNjc1NTsmIzIwODM3OyYjMjY2OTQ7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxMzEuOTk5NSIgeD0iODYuMTk4NiIgeT0iMjE4Ljg5MDYiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxMTEuOTk5NSIgeD0iOTYuMTk4NiIgeT0iMjQxLjg4NTciPiYjMjE0NTc7JiMzNjg2NTsmIzIwMDI3OyYjMjUzNDU7JiMyMDE1NDsmIzI0MzIwOyYjMjIzMzA7JiMzMDMzMzs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE4OC43Nzg3IiB4PSI1Ny44MDkiIHk9IjI3NS4xODc1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTY4Ljc3ODciIHg9IjY3LjgwOSIgeT0iMjk4LjE4MjYiPiYjMjIzMTI7IERPTSAmIzIwMDEzOyYjMjU2Mjg7JiMzMjAzNDsmIzI0MzIwOyYjMjIzMzA7JiMzMDMzMzsmIzI1OTkxOyYjMjY0MTI7PC90ZXh0PjxyZWN0IGZpbGw9IiNGMUYxRjEiIGhlaWdodD0iMzYuMjk2OSIgcng9IjEyLjUiIHJ5PSIxMi41IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjAuNTsiIHdpZHRoPSIxNzMuOTk5MyIgeD0iNjUuMTk4NyIgeT0iMzMxLjQ4NDQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIxNTMuOTk5MyIgeD0iNzUuMTk4NyIgeT0iMzU0LjQ3OTUiPiYjMjAxNzQ7JiMyNjM2ODsmIzI4MTQ1OyYjMjEzMDU7JiMzNzE5NzsmIzMzNDEwOyYjMjg4NTc7JiMyMTUyMTsmIzE5OTc4OyYjMzY5NDE7JiMyMTM4Mjs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjE1OS45OTk0IiB4PSI3Mi4xOTg2IiB5PSIzODcuNzgxMyIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjEzOS45OTk0IiB4PSI4Mi4xOTg2IiB5PSI0MTAuNzc2NCI+JiMyNTIxNDsmIzIxMDQwOyYjMjE0ODc7JiMyODM3ODsmIzIxMTYwOyYjMzAzNDA7JiMzMTA2MjsmIzIwODA4OyYjMjM0ODE7JiMyMjEyMDs8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI0OC43NzExIiB4PSIyNy44MTI4IiB5PSI0NDQuMDc4MSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjIyOC43NzExIiB4PSIzNy44MTI4IiB5PSI0NjcuMDczMiI+JiMyNjYzMTsmIzM1NzYwOyYjMjQwNTA7JiMyNjM3NzsmIzIzMzc2OyYjMzM0MTA7JiMyODg1NzsgKGRhdGEtYWdvcmEtc2Vlbik8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjIyMi42MzAxIiB4PSI0MC44ODMzIiB5PSI1MDAuMzc1Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMjAyLjYzMDEiIHg9IjUwLjg4MzMiIHk9IjUyMy4zNzAxIj4mIzMwNDE3OyYjMjE1NDg7JiMyNjAzMjsmIzIyNjg2OyYjMjY0MTA7JiMyNjYzMTsmIzM1NzYwOyYjMjMzNzY7JiMzMzQxMDsmIzI4ODU3OyAmIzg1OTQ7ICYjMjYwMzI7JiMyMjIzODsmIzIyNzk3OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDowLjU7IiB3aWR0aD0iMTgxLjE1MDMiIHg9IjYxLjYyMzIiIHk9IjU1Ni42NzE5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTYxLjE1MDMiIHg9IjcxLjYyMzIiIHk9IjU3OS42NjciPiYjMzY3MTg7JiMzNTgxMDsgZXh0cmFjdFJlc3BvbnNlKCk8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MC41OyIgd2lkdGg9IjI4Mi4zOTY3IiB4PSIxMSIgeT0iNjEyLjk2ODgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyNjIuMzk2NyIgeD0iMjEiIHk9IjYzNS45NjM5Ij4mIzIwMDA0OyYjMjc0MjU7JiMzMjQ2NzsmIzI2NTI0OyYjMTk5Njg7JiMzMzI2ODsgKyAmIzI2MDgwOyBzdG9wICYjMjUzNTM7JiMzODA2MjsgJiM4NTk0OyAmIzI3OTY5OyYjMjQzMzU7JiMzMjQ2NzsmIzI2NDYzOzwvdGV4dD48ZWxsaXBzZSBjeD0iMTUyLjE5ODMiIGN5PSI2ODAuMjY1NiIgZmlsbD0ibm9uZSIgcng9IjExIiByeT0iMTEiIHN0eWxlPSJzdHJva2U6IzIyMjIyMjtzdHJva2Utd2lkdGg6MTsiLz48ZWxsaXBzZSBjeD0iMTUyLjE5ODMiIGN5PSI2ODAuMjY1NiIgZmlsbD0iIzIyMjIyMiIgcng9IjYiIHJ5PSI2IiBzdHlsZT0ic3Ryb2tlOiMyMjIyMjI7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE1Mi4xOTgzIiB4Mj0iMTUyLjE5ODMiIHkxPSIzMCIgeTI9IjUwIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDguMTk4Myw0MCwxNTIuMTk4Myw1MCwxNTYuMTk4Myw0MCwxNTIuMTk4Myw0NCIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNTIuMTk4MyIgeDI9IjE1Mi4xOTgzIiB5MT0iODYuMjk2OSIgeTI9IjEwNi4yOTY5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDguMTk4Myw5Ni4yOTY5LDE1Mi4xOTgzLDEwNi4yOTY5LDE1Ni4xOTgzLDk2LjI5NjksMTUyLjE5ODMsMTAwLjI5NjkiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTUyLjE5ODMiIHgyPSIxNTIuMTk4MyIgeTE9IjE0Mi41OTM4IiB5Mj0iMTYyLjU5MzgiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0OC4xOTgzLDE1Mi41OTM4LDE1Mi4xOTgzLDE2Mi41OTM4LDE1Ni4xOTgzLDE1Mi41OTM4LDE1Mi4xOTgzLDE1Ni41OTM4IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE1Mi4xOTgzIiB4Mj0iMTUyLjE5ODMiIHkxPSIxOTguODkwNiIgeTI9IjIxOC44OTA2Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDguMTk4MywyMDguODkwNiwxNTIuMTk4MywyMTguODkwNiwxNTYuMTk4MywyMDguODkwNiwxNTIuMTk4MywyMTIuODkwNiIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNTIuMTk4MyIgeDI9IjE1Mi4xOTgzIiB5MT0iMjU1LjE4NzUiIHkyPSIyNzUuMTg3NSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQ4LjE5ODMsMjY1LjE4NzUsMTUyLjE5ODMsMjc1LjE4NzUsMTU2LjE5ODMsMjY1LjE4NzUsMTUyLjE5ODMsMjY5LjE4NzUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTUyLjE5ODMiIHgyPSIxNTIuMTk4MyIgeTE9IjMxMS40ODQ0IiB5Mj0iMzMxLjQ4NDQiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0OC4xOTgzLDMyMS40ODQ0LDE1Mi4xOTgzLDMzMS40ODQ0LDE1Ni4xOTgzLDMyMS40ODQ0LDE1Mi4xOTgzLDMyNS40ODQ0IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE1Mi4xOTgzIiB4Mj0iMTUyLjE5ODMiIHkxPSIzNjcuNzgxMyIgeTI9IjM4Ny43ODEzIi8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDguMTk4MywzNzcuNzgxMywxNTIuMTk4MywzODcuNzgxMywxNTYuMTk4MywzNzcuNzgxMywxNTIuMTk4MywzODEuNzgxMyIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNTIuMTk4MyIgeDI9IjE1Mi4xOTgzIiB5MT0iNDI0LjA3ODEiIHkyPSI0NDQuMDc4MSIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQ4LjE5ODMsNDM0LjA3ODEsMTUyLjE5ODMsNDQ0LjA3ODEsMTU2LjE5ODMsNDM0LjA3ODEsMTUyLjE5ODMsNDM4LjA3ODEiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTUyLjE5ODMiIHgyPSIxNTIuMTk4MyIgeTE9IjQ4MC4zNzUiIHkyPSI1MDAuMzc1Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDguMTk4Myw0OTAuMzc1LDE1Mi4xOTgzLDUwMC4zNzUsMTU2LjE5ODMsNDkwLjM3NSwxNTIuMTk4Myw0OTQuMzc1IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PGxpbmUgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIgeDE9IjE1Mi4xOTgzIiB4Mj0iMTUyLjE5ODMiIHkxPSI1MzYuNjcxOSIgeTI9IjU1Ni42NzE5Ii8+PHBvbHlnb24gZmlsbD0iIzE4MTgxOCIgcG9pbnRzPSIxNDguMTk4Myw1NDYuNjcxOSwxNTIuMTk4Myw1NTYuNjcxOSwxNTYuMTk4Myw1NDYuNjcxOSwxNTIuMTk4Myw1NTAuNjcxOSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxOyIvPjxsaW5lIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiIHgxPSIxNTIuMTk4MyIgeDI9IjE1Mi4xOTgzIiB5MT0iNTkyLjk2ODgiIHkyPSI2MTIuOTY4OCIvPjxwb2x5Z29uIGZpbGw9IiMxODE4MTgiIHBvaW50cz0iMTQ4LjE5ODMsNjAyLjk2ODgsMTUyLjE5ODMsNjEyLjk2ODgsMTU2LjE5ODMsNjAyLjk2ODgsMTUyLjE5ODMsNjA2Ljk2ODgiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MTsiLz48bGluZSBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7IiB4MT0iMTUyLjE5ODMiIHgyPSIxNTIuMTk4MyIgeTE9IjY0OS4yNjU2IiB5Mj0iNjY5LjI2NTYiLz48cG9seWdvbiBmaWxsPSIjMTgxODE4IiBwb2ludHM9IjE0OC4xOTgzLDY1OS4yNjU2LDE1Mi4xOTgzLDY2OS4yNjU2LDE1Ni4xOTgzLDY1OS4yNjU2LDE1Mi4xOTgzLDY2My4yNjU2IiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjE7Ii8+PD9wbGFudHVtbC1zcmMgRlA3RFJqZkc0OE50VmVnaGg1OUxNS0pBZ2dZaExqckxhVGVkazg3UjI4TlFvQnY4TExTY0JKejYxWGlZS0lMbkEyMlllOU9PS1g3NTY5bzdnSm5weExMVmVUVERuTlJFRVB6Y3BYV2RIUkxDVFZnSDdEN3lvUjZrTFRKMkF3c2F3T0poTDNNYW41SWs2NWpOV05zV2JIOV9ld2R5VlY0cDhfaTdZYzltZ2RENVVQNkV4akVoQ1JJNklISTFSc0ZKcFNhZk1aX0hTVDBvcVJEOE5rT2FhMU1BZDF3THNDaVRoYlZPM2U3UTV4NFN2Z0pQallIMnRDb25xdUZHLVJFbm1VY1pQeUJhSGJueVpJQ2wzaUJheUduZ3JwWWdQdEhta2diUFpPQ3Jzakt1MzY1WldYVUF5cVlvbTlrSXJ1VGxJSHBTZWtrOXZOV2hPaC0xdGFuUXVkTDdtbDdYM2tuTE1jaWRoTERua1dBdDZtVWpqRGc2SlpyUm9OZzR2V0FTRVF1bGUzTUxRdVpoRmpJUXVBX1dWRmhsbWM0WnlIVm15NGpVMkJWazR1Tmk1WVlkVV9IT3EtY1VtUFp3SkJCNFBIVlM2Vk9OQzF3V3otRF9TMWx2TlUtSEpCbVNtQUlUYVBGOEotUFptWng5UC1KdkVzUUtEVExXa25hZzNZT3U2dWRyNkd2YUFNUklNOUJkMUJ5RFlTNnJDaWJ3eEZiRm1GaWdSOXBDVUZLemJwckJBX3k1Pz48L2c+PC9zdmc+'>

<p>几个核心思路：</p>
<h3 id="找输入框：按面积排序"><a href="#找输入框：按面积排序" class="headerlink" title="找输入框：按面积排序"></a>找输入框：按面积排序</h3><p>不管是 Claude 的 ProseMirror、ChatGPT 的 <code>#prompt-textarea</code> 还是 Gemini 的输入组件，它们有一个共同点：<strong>都是页面上最大的 <code>contenteditable=&quot;true&quot;</code> 元素</strong>。按面积排序取最大的，在所有服务上都 work。</p>
<h3 id="找回复容器：探针消息"><a href="#找回复容器：探针消息" class="headerlink" title="找回复容器：探针消息"></a>找回复容器：探针消息</h3><p>发一条已知内容的消息——比如主持人的开场白——然后在 DOM 里搜索这段文本。找到后从最深匹配节点向上遍历，直到命中一个可滚动的祖先——那就是回复容器。</p>
<h3 id="检测新回复：标记法"><a href="#检测新回复：标记法" class="headerlink" title="检测新回复：标记法"></a>检测新回复：标记法</h3><p>给容器里已有的子节点都打上 <code>data-agora-seen</code> 标记，任何未标记的新子节点就是新回复。不依赖任何 class name。</p>
<h3 id="检测流式结束：双轮询-stop-按钮"><a href="#检测流式结束：双轮询-stop-按钮" class="headerlink" title="检测流式结束：双轮询 + stop 按钮"></a>检测流式结束：双轮询 + stop 按钮</h3><p>连续两次 <code>extractResponse()</code> 的结果一致，且页面上没有可见的 stop&#x2F;cancel 按钮——流式输出结束。不需要知道每个服务用什么 class 来标记 streaming 状态。</p>
<p><strong>最终结果：添加一个新的 AI 服务只需要约 10 行代码。</strong> 零 service-specific selector。</p>
<h2 id="实战中的幺蛾子"><a href="#实战中的幺蛾子" class="headerlink" title="实战中的幺蛾子"></a>实战中的幺蛾子</h2><p>通用方案解决了架构问题，但浏览器自动化的魔鬼永远藏在细节里。</p>
<h3 id="Gemini-的-Angular-DOM-替换"><a href="#Gemini-的-Angular-DOM-替换" class="headerlink" title="Gemini 的 Angular DOM 替换"></a>Gemini 的 Angular DOM 替换</h3><p>Gemini 会先渲染一个 <code>&lt;pending-request&gt;</code> 占位符，Angular 随后把它替换成真正的回复节点。如果你缓存了占位符的 <code>ElementHandle</code>，它会 stale——指向一个已经不在 DOM 树里的幽灵节点。</p>
<p>解决办法是放弃缓存单一节点引用，改为每次都从 live DOM tree 的多级结构中提取内容。</p>
<h3 id="ElementHandle-内存泄漏"><a href="#ElementHandle-内存泄漏" class="headerlink" title="ElementHandle 内存泄漏"></a>ElementHandle 内存泄漏</h3><p><code>page.evaluateHandle()</code> 返回的 handle 必须手动 <code>dispose()</code>。<code>findInput()</code> 每 300ms 调一次来更新输入框状态——如果不做缓存和清理，handle 会像滚雪球一样堆积。实测大约 15 分钟后 Node.js 就会 OOM crash，内存飙到 4GB。</p>
<p>修复方式是缓存 handle，替换时通过 <code>_setHandle()</code> 清理旧引用。</p>
<h3 id="Frame-detachment"><a href="#Frame-detachment" class="headerlink" title="Frame detachment"></a>Frame detachment</h3><p>长时间运行（7 轮以上）偶尔会触发页面重新渲染，主 frame 被 detach，所有 Puppeteer 调用瞬间崩溃。</p>
<p>靠 <code>resetDOM()</code> 做清理，加 <code>framenavigated</code> listener 做主动恢复。</p>
<h3 id="macOS-的屏幕休眠"><a href="#macOS-的屏幕休眠" class="headerlink" title="macOS 的屏幕休眠"></a>macOS 的屏幕休眠</h3><p>这个最离谱。macOS 屏幕休眠会挂起 Chrome 进程，CDP WebSocket 连接直接断掉。辩论进行到一半，系统睡了，一切白费。</p>
<p>最终用 <code>caffeinate -dims</code> 在辩论期间阻止系统休眠。一行命令，解决一个让人抓狂的问题。</p>
<h2 id="三轮迭代的启示"><a href="#三轮迭代的启示" class="headerlink" title="三轮迭代的启示"></a>三轮迭代的启示</h2><p>回头看这三轮演进，有一条线索贯穿始终：<strong>不要跟平台对着干，要像普通用户一样行事。</strong></p>
<p>Playwright 和 Puppeteer launch 模式的问题本质上是一样的——它们以“自动化工具”的身份启动浏览器，从第一毫秒就暴露了意图。而最终方案之所以 work，是因为 Chrome 进程本身就是一个正常浏览器，Puppeteer 只是事后接入的观察者。</p>
<p>通用 DOM 发现的思路也是同一逻辑：不要依赖平台的实现细节（CSS class），而是依赖不变的语义（最大的 editable 元素就是输入框，新增的子节点就是新回复）。</p>
<p><strong>好的自动化方案不是更聪明地伪装，而是从根本上消除需要伪装的理由。</strong></p>
</div><iframe src="/donate/?AliPayQR=/img/AliPayQR.png&amp;WeChatQR=/img/WeChatQR.png&amp;GitHub=undefined&amp;BTCQR=undefined&amp;BTCKEY=undefined&amp;PayPal=undefined" style="overflow-x:hidden; overflow-y:hidden; border:0xp none #fff; min-height:300px; width:100%;" frameborder="0" scrolling="no"></iframe><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>johnsonlee</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2026/02/14/agora-technical-journey/">https://johnsonlee.io/2026/02/14/agora-technical-journey/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</li></ul></div><br><div class="tags"><a href="/tags/AI/">AI</a><a href="/tags/Browser-Automation/">Browser Automation</a><a href="/tags/Puppeteer/">Puppeteer</a><a href="/tags/CDP/">CDP</a><a href="/tags/DOM/">DOM</a><a href="/tags/Web-Scraping/">Web Scraping</a></div><div class="post-nav"><a class="pre" href="/2026/02/15/ai-as-thinking-partner/">当 AI 成为你的“思考伙伴”</a><a class="next" href="/2026/02/13/confirmation-bias/">别让你的认知偏差限制了 AI 的发挥</a></div><script type="text/javascript" id="diffblog-plugin-script" async="false" src="https://diff.blog/static/js/diffblog_plugin_v1.js"></script><script>document.getElementById("diffblog-plugin-script").addEventListener('load', () => {
  DiffBlog('0jhfofmazizsde2k5pw64l8p2sy592xanbfvhtabsoy93kenap');
});
</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"Agora 的技术选型与踩坑实录","datePublished":"2026-02-14T23:27:00.000Z","dateModified":"2026-02-14T23:27:00.000Z","author":{"@type":"Person","name":"Johnson Lee","url":"https://johnsonlee.io"},"publisher":{"@type":"Person","name":"Johnson Lee","url":"https://johnsonlee.io"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://johnsonlee.io/2026/02/14/agora-technical-journey/"},"description":"为了更深入地了解 AI 的思维和推理模式，脑子里冒出一个大胆的想法——让两个 AI 像人一样互相辩论。于是就有了 Agora 这个项目。 一开始想得很简单：用 WebDriver 启两个浏览器窗口，通过注入的 JS 作为桥梁，把 A 的输出喂给 B，B 的回复再喂回 A。 为什么走浏览器自动化而不是 API？三个平台的会员我都有，浏览器里聊天不要钱，但 API 各收各的钱、各配各的 SDK——没必"}</script><div id="container"></div><link rel="preload" type="text/css" href="/libs/gitalk/1.7.2/gitalk.css" as="style" onload="this.rel=&quot;stylesheet&quot;"><script>(function() {
  load(
    '/libs/blueimp-md5/2.10.0/js/md5.js',
    '/libs/gitalk/1.7.2/gitalk.min.js'
  ).then(() => {
    var gitalk = new Gitalk({
      clientID: '80b7a03dd9cce611f9ff',
      clientSecret: 'e3296e3d54d9da61d79ee7cf072fa7a1fb5eebc2',
      repo: 'blog',
      owner: 'johnsonlee',
      admin: ['johnsonlee'],
      id: md5(location.pathname),
      distractionFreeMode: false
    })
    gitalk.render('container')
  })
})();</script></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://johnsonlee.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul><li><a href="/categories/biology/">Biology (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/career/">Career (10)</a><ul style="padding:revert"></ul></li><li><a href="/categories/Cognitive-Science/">Cognitive Science (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/">Computer Science (104)</a><ul style="padding:revert"><li><a href="/categories/computer-science/architecture-design/">Architecture Design (7)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/cloud/">Cloud (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/Engineering/">Engineering (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/gradle/">Gradle (4)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/graphics/">Graphics (2)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/java/">Java (12)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/kotlin/">Kotlin (7)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/mobile/">Mobile (10)</a><ul style="padding:revert"><li><a href="/categories/computer-science/mobile/android/">Android (5)</a></li><li><a href="/categories/computer-science/mobile/flutter/">Flutter (1)</a></li></ul></li><li><a href="/categories/computer-science/observability/">Observability (2)</a><ul style="padding:revert"></ul></li><li><a href="/categories/computer-science/open-source/">Open Source (56)</a><ul style="padding:revert"><li><a href="/categories/computer-science/open-source/booster/">Booster (56)</a></li></ul></li><li><a href="/categories/computer-science/Programming/">Programming (2)</a><ul style="padding:revert"></ul></li></ul></li><li><a href="/categories/diy/">DIY (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/Independent-Thinking/">Independent Thinking (27)</a><ul style="padding:revert"></ul></li><li><a href="/categories/Investing/">Investing (3)</a><ul style="padding:revert"></ul></li><li><a href="/categories/Investment/">Investment (1)</a><ul style="padding:revert"></ul></li><li><a href="/categories/life/">Life (9)</a><ul style="padding:revert"></ul></li><li><a href="/categories/reading/">Reading (2)</a><ul style="padding:revert"></ul></li><li><a href="/categories/UI-UX/">UI/UX (1)</a><ul style="padding:revert"><li><a href="/categories/UI-UX/Design-System/">Design System (1)</a><ul style="padding:revert"></ul></li></ul></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/Korea/" style="font-size: 15px;">Korea</a> <a href="/tags/Seoul/" style="font-size: 15px;">Seoul</a> <a href="/tags/Independent-Thinking/" style="font-size: 15px;">Independent Thinking</a> <a href="/tags/Gradle/" style="font-size: 15px;">Gradle</a> <a href="/tags/java-gradle-plugin/" style="font-size: 15px;">java-gradle-plugin</a> <a href="/tags/AI/" style="font-size: 15px;">AI</a> <a href="/tags/Agent/" style="font-size: 15px;">Agent</a> <a href="/tags/Claude/" style="font-size: 15px;">Claude</a> <a href="/tags/Career/" style="font-size: 15px;">Career</a> <a href="/tags/Browser-Automation/" style="font-size: 15px;">Browser Automation</a> <a href="/tags/Puppeteer/" style="font-size: 15px;">Puppeteer</a> <a href="/tags/CDP/" style="font-size: 15px;">CDP</a> <a href="/tags/DOM/" style="font-size: 15px;">DOM</a> <a href="/tags/Web-Scraping/" style="font-size: 15px;">Web Scraping</a> <a href="/tags/Self-Reflection/" style="font-size: 15px;">Self-Reflection</a> <a href="/tags/LLM/" style="font-size: 15px;">LLM</a> <a href="/tags/Gemini/" style="font-size: 15px;">Gemini</a> <a href="/tags/Alignment/" style="font-size: 15px;">Alignment</a> <a href="/tags/Communication/" style="font-size: 15px;">Communication</a> <a href="/tags/Investing/" style="font-size: 15px;">Investing</a> <a href="/tags/ROI/" style="font-size: 15px;">ROI</a> <a href="/tags/Big-Tech/" style="font-size: 15px;">Big Tech</a> <a href="/tags/Infrastructure/" style="font-size: 15px;">Infrastructure</a> <a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/Productivity/" style="font-size: 15px;">Productivity</a> <a href="/tags/Workflow/" style="font-size: 15px;">Workflow</a> <a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/Build/" style="font-size: 15px;">Build</a> <a href="/tags/Compiler/" style="font-size: 15px;">Compiler</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/Kotlin/" style="font-size: 15px;">Kotlin</a> <a href="/tags/ES5/" style="font-size: 15px;">ES5</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Booster/" style="font-size: 15px;">Booster</a> <a href="/tags/Performance-Optimization/" style="font-size: 15px;">Performance Optimization</a> <a href="/tags/ReleaseNote/" style="font-size: 15px;">ReleaseNote</a> <a href="/tags/Stock/" style="font-size: 15px;">Stock</a> <a href="/tags/ChatGPT/" style="font-size: 15px;">ChatGPT</a> <a href="/tags/Financial-Analysis/" style="font-size: 15px;">Financial Analysis</a> <a href="/tags/Model-Evaluation/" style="font-size: 15px;">Model Evaluation</a> <a href="/tags/UX/" style="font-size: 15px;">UX</a> <a href="/tags/Compatibility/" style="font-size: 15px;">Compatibility</a> <a href="/tags/Lambda/" style="font-size: 15px;">Lambda</a> <a href="/tags/Education/" style="font-size: 15px;">Education</a> <a href="/tags/Software-Engineering/" style="font-size: 15px;">Software Engineering</a> <a href="/tags/Architecture/" style="font-size: 15px;">Architecture</a> <a href="/tags/AGP/" style="font-size: 15px;">AGP</a> <a href="/tags/Dart/" style="font-size: 15px;">Dart</a> <a href="/tags/Flutter/" style="font-size: 15px;">Flutter</a> <a href="/tags/Maven/" style="font-size: 15px;">Maven</a> <a href="/tags/Coupang/" style="font-size: 15px;">Coupang</a> <a href="/tags/Reveal2021/" style="font-size: 15px;">Reveal2021</a> <a href="/tags/Music/" style="font-size: 15px;">Music</a> <a href="/tags/Machine-Learning/" style="font-size: 15px;">Machine Learning</a> <a href="/tags/Transformer/" style="font-size: 15px;">Transformer</a> <a href="/tags/Deep-Learning/" style="font-size: 15px;">Deep Learning</a> <a href="/tags/HTML/" style="font-size: 15px;">HTML</a> <a href="/tags/Programming/" style="font-size: 15px;">Programming</a> <a href="/tags/Economics/" style="font-size: 15px;">Economics</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/SPI/" style="font-size: 15px;">SPI</a> <a href="/tags/MVVM/" style="font-size: 15px;">MVVM</a> <a href="/tags/JetPack/" style="font-size: 15px;">JetPack</a> <a href="/tags/Preloading/" style="font-size: 15px;">Preloading</a> <a href="/tags/Mental-Health/" style="font-size: 15px;">Mental Health</a> <a href="/tags/Finance/" style="font-size: 15px;">Finance</a> <a href="/tags/Society/" style="font-size: 15px;">Society</a> <a href="/tags/Wall-Street/" style="font-size: 15px;">Wall Street</a> <a href="/tags/Contrarian/" style="font-size: 15px;">Contrarian</a> <a href="/tags/Alpha/" style="font-size: 15px;">Alpha</a> <a href="/tags/Risk-Management/" style="font-size: 15px;">Risk Management</a> <a href="/tags/Hiring/" style="font-size: 15px;">Hiring</a> <a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/Engineering-Leadership/" style="font-size: 15px;">Engineering Leadership</a> <a href="/tags/Housing/" style="font-size: 15px;">Housing</a> <a href="/tags/Evolution/" style="font-size: 15px;">Evolution</a> <a href="/tags/DeepMind/" style="font-size: 15px;">DeepMind</a> <a href="/tags/AlphaFold2/" style="font-size: 15px;">AlphaFold2</a> <a href="/tags/CASP/" style="font-size: 15px;">CASP</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2026/02/26/from-llm-to-effective-communication/">从 LLM 到高效沟通</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/25/from-compiler-to-llm/">从编译器到 LLM：软件分层的轮回</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/25/llm-is-a-function/">LLM 的本质——函数</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/25/tetris-effect-of-ai-conversations/">植入潜意识——AI 版的盗梦空间</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/15/ai-as-thinking-partner/">当 AI 成为你的“思考伙伴”</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/14/agora-technical-journey/">Agora 的技术选型与踩坑实录</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/13/confirmation-bias/">别让你的认知偏差限制了 AI 的发挥</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/12/what-should-engineering-hiring-evaluate-in-ai-era/">都 2026 了，还在考算法？</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/12/ai-debate-what-i-learned/">一场 AI 辩论暴露了 LLM 性格的本质</a></li><li class="post-list-item"><a class="post-list-link" href="/2026/02/11/ai-investment-roi-reality-check/">一年烧 $700B，谁会是下一个摩托罗拉？</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/johnsonlee" title="GitHub" target="_blank">GitHub</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2026 <a href="/." rel="nofollow">Johnson Lee.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-154930895-1','auto');ga('send','pageview');
</script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.async = 1;
  hm.src = 'https://hm.baidu.com/hm.js?' + 'bceb83a2d24731111cbcf93ac3960952';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script><script>load('/libs/viz/2.1.2/viz.js').then(() => {
  let graphs = document.querySelectorAll('.graphviz')

  if (graphs.length > 0) {
    for (let graph of graphs) {
      let svg = undefined;
      try {
        svg = Viz(graph.textContent.replaceAll('–', '--'), 'svg');
      } catch(e) {
        svg = `<pre class="error">${e}</pre>`;
      }
      graph.outerHTML = svg;
    }
  }
});
</script><script>load('/libs/jquery/3.4.0/jquery.min.js').then(() => {
  load(
    '/js/search.js',
    '/js/share.js',
    '/js/smartresize.js',
    '/js/totop.js'
  ).then(() => {
    load('/js/codeblock-resizer.js').then(() => {});
    ('function' == typeof setupSearch) && setupSearch();
  });
});</script></div></body></html>